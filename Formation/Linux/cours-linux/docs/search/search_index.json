{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Pr\u00e9ambule # Objectifs # Public #","title":"Pr\u00e9ambule"},{"location":"#preambule","text":"","title":"Pr\u00e9ambule"},{"location":"#objectifs","text":"","title":"Objectifs"},{"location":"#public","text":"","title":"Public"},{"location":"sopra-01-accueil/","text":"Unix / Linux (centr\u00e9 sur l'usage du Shell) COURS environnement d'un processus au moment de la cr\u00e9ation d'un fils, l'enviromment est transmis. il peut etre modifi\u00e9 \u00e0 ce moment Commande NOM_MACHINE_VIRTUELLE ssh permet de se connecter \u00e0 une machine virtuelle, systeme distant ex : vagrant ssh Nettoyage du shell Commande env affiche l'environnement de l'endroit (var, ... ) on peut modifier l'enviromment de la commande Commande python Language de programmation ? Permet de faire des calculs (et surement PLEIN d'autres trucs) IN OUT \u2014 | cat | \u2192 | cut | \u203e\u203e\u203e\u203e\u203e\u2198 \u203e\u203e\u203e\u203e\u203e ERR | = branchement entre diff\u00e9rentes commandes Commande hexdump TRUC Affiche en version hexadecimale Affiche le contenu du fichier en Hexad\u00e9cimal, d\u00e9cimal ou octet /// TRUCS EN VRAC (en attendant mieux) quand on appele une commande sans sp\u00e9cifier , il cherche dans PATH ex : si on tape cp --> execute /bin/cp fonction hasha ou hash : utilis\u00e9e en cryptographie, si on reverse la fonction, plusieurs x possibles de base. replie l'espace utilis\u00e9 par la fonction interet : deux donn\u00e9es diff\u00e9rentes ont un h(x) diff\u00e9rent. (si h(x) = h(y), ca l'implique pas que x=y exemple code LUHN pour la carte bancaire MD5 : danger en crypto peut etre pr\u00e9dit --> \u00e0 \u00e9viter SHA : peut etre pr\u00e9dit --> \u00e0 \u00e9viter ex : sha512sum \\ : Prot\u00e8ge ce qui est \u00e9crit derri\u00e8re exemple : cr\u00e9er un nom de fichier avec un espace : mkdir Les\\ Diaphanes (sinon \u00e7a cr\u00e9e deux dossier) \"TRUC\" : tout ce qui est entre les guillements est un groupe (ou consid\u00e9r\u00e9 comme un seul mot). il faut forc\u00e9ment les refermer, sinon ca ne fonctionne pas. Protection soit de la zone probl\u00e9matique, soit protection de toute la chaine, les deux fonctionnent exemple: \"Les Diaphanes\" 'TRUC' : presque la m\u00eame chose que \"TRUC\" ? = saut de ligne dans un nom $ : contenu de la variable ex : echo $PATH commande echo TRUC(commande, variables, ...) afficher le truc script : ensemble de commandes =) LISTE UTILE DES CMD http://juliend.github.io/linux-cheatsheet/#ssh \ud83d\udc4c Commandes en s\u00e9rie # | : pipe permet de mettre des commandes en s\u00e9rie","title":"Sopra 01 accueil"},{"location":"sopra-01-accueil/#commandes-en-serie","text":"| : pipe permet de mettre des commandes en s\u00e9rie","title":"Commandes en s\u00e9rie"},{"location":"010-user/010-intro-presentation/","text":"Introduction & pr\u00e9sentation # Historique du syst\u00e8me Naissance du syst\u00e8me","title":"Introduction & pr\u00e9sentation"},{"location":"010-user/010-intro-presentation/#introduction-presentation","text":"Historique du syst\u00e8me Naissance du syst\u00e8me","title":"Introduction &amp; pr\u00e9sentation"},{"location":"010-user/010-intro-presentation/010-introduction-history/","text":"Histoire de GNU/Linux # Avant GNU/Linux # Vue d'ensemble # Voir une version plus compl\u00e8te (simplifi\u00e9e) Histoire d'Unix # 1969-1978: Unix V1 \u00e0 Unix V7 # 1969 : Unix d\u00e9velopp\u00e9 par Ken Thompson et Dennis Ritchie, dans les Bell Labs de AT&T, sur un PDP 7. Son utilisation est limit\u00e9e \u00e0 l'enseignement et la recherche. AT&T n'a pas le droit de le commercialiser. 1973 : Dennis Ritchie con\u00e7oit le langage C. Ken Thomson utilise C pour r\u00e9\u00e9crire UNIX et le rendre \"facilement\" portable sur d'autres plates-formes 1977 : Unix port\u00e9 sur Interdata 8/32 1978 : Unix V7 Support du swapping et des fichiers de grande taille 1979-1988: # Cr\u00e9ation de la Berkeley Software Distribution (BSD) Am\u00e9liorations par l'universit\u00e9 de Californie. 1990-2002: Standardisation # POSIX : ISO : Le projet GNU (GNU is Not Unix) # 1983: Richard Stallman annonce le projet GNU Syst\u00e8me d'exploitation libre compatible UNIX Invitation de la communaut\u00e9 hacker \u00e0 le rejoindre et participer aux d\u00e9veloppement 1985: Les pi\u00e8ces ma\u00eetresses sont op\u00e9rationnelles (GCC) Mais le syst\u00e8me n'est pas complet ni ind\u00e9pendant sans un noyau GNU 1990: D\u00e9marrage du projet de noyau GNU Hurd Son d\u00e9veloppement prendra plus de 10 ans Minix # 1987: Andrew S. Tanenbaum cr\u00e9e Minix un syst\u00e8me d'exploitation de \"type\" Unix (mais pas un d\u00e9riv\u00e9) \u00e0 des fins p\u00e9dagogiques pour remplacer le code source du Lion's Book avec Unix Time-sharing system 6 qu'il utilisait comme support de cours et dont AT&T interdit ensuite l'utilisation dans un cadre p\u00e9dagogique. bas\u00e9 sur un micro-noyau sous la licence BSD Support des x86 et Solaris SPARC 1997: Minix v2.x Retrait des protocoles r\u00e9seau Amoeba et ajout de TCP/IP Support des i386 32bits 2005: Minix v3.x Support des architectures IA-32 et ARM Disponibilit\u00e9 sur Live-CD Addition de X11 et des utilitaires Unix classiques Support de la m\u00e9moire dvirtuelle Histoire de Linux # Linux # 1991: Linus Torvalds d\u00e9veloppe un noyau de syst\u00e8me d'exploitation ... qui prendra le nom de \u00ab noyau Linux \u00bb 25 ao\u00fbt 1991: annonce sur Usenet comp.os.minix le d\u00e9veloppement du noyau Linux. Linus Torvalds choisit de publier son noyau sous licence GNU GPL. Cette d\u00e9cision compatibles juridiquement les syst\u00e8mes GNU et Linux. Tombe au bon moment pour combler le vide dans le projet GNU (Hurd \u00e9tant inachev\u00e9) GNU et le noyau Linux sont d\u00e8s lors associ\u00e9s pour former un nouveau syst\u00e8me d'exploitation complet: GNU/Linux. Le syst\u00e8me GNU / Linux # Une famille de syst\u00e8mes d'exploitation Inspir\u00e9s d'unix Bas\u00e9s sur le projet GNU (1984) Bases sur le noyau Linux (1991) Constitu\u00e9s de logiciels libres et open-source","title":"Histoire de GNU/Linux"},{"location":"010-user/010-intro-presentation/010-introduction-history/#histoire-de-gnulinux","text":"","title":"Histoire de GNU/Linux"},{"location":"010-user/010-intro-presentation/010-introduction-history/#avant-gnulinux","text":"","title":"Avant GNU/Linux"},{"location":"010-user/010-intro-presentation/010-introduction-history/#vue-densemble","text":"Voir une version plus compl\u00e8te (simplifi\u00e9e)","title":"Vue d'ensemble"},{"location":"010-user/010-intro-presentation/010-introduction-history/#histoire-dunix","text":"","title":"Histoire d'Unix"},{"location":"010-user/010-intro-presentation/010-introduction-history/#1969-1978-unix-v1-a-unix-v7","text":"1969 : Unix d\u00e9velopp\u00e9 par Ken Thompson et Dennis Ritchie, dans les Bell Labs de AT&T, sur un PDP 7. Son utilisation est limit\u00e9e \u00e0 l'enseignement et la recherche. AT&T n'a pas le droit de le commercialiser. 1973 : Dennis Ritchie con\u00e7oit le langage C. Ken Thomson utilise C pour r\u00e9\u00e9crire UNIX et le rendre \"facilement\" portable sur d'autres plates-formes 1977 : Unix port\u00e9 sur Interdata 8/32 1978 : Unix V7 Support du swapping et des fichiers de grande taille","title":"1969-1978: Unix V1 \u00e0 Unix V7"},{"location":"010-user/010-intro-presentation/010-introduction-history/#1979-1988","text":"Cr\u00e9ation de la Berkeley Software Distribution (BSD) Am\u00e9liorations par l'universit\u00e9 de Californie.","title":"1979-1988: "},{"location":"010-user/010-intro-presentation/010-introduction-history/#1990-2002-standardisation","text":"POSIX : ISO :","title":"1990-2002: Standardisation"},{"location":"010-user/010-intro-presentation/010-introduction-history/#le-projet-gnu-gnu-is-not-unix","text":"1983: Richard Stallman annonce le projet GNU Syst\u00e8me d'exploitation libre compatible UNIX Invitation de la communaut\u00e9 hacker \u00e0 le rejoindre et participer aux d\u00e9veloppement 1985: Les pi\u00e8ces ma\u00eetresses sont op\u00e9rationnelles (GCC) Mais le syst\u00e8me n'est pas complet ni ind\u00e9pendant sans un noyau GNU 1990: D\u00e9marrage du projet de noyau GNU Hurd Son d\u00e9veloppement prendra plus de 10 ans","title":"Le projet GNU (GNU is Not Unix)"},{"location":"010-user/010-intro-presentation/010-introduction-history/#minix","text":"1987: Andrew S. Tanenbaum cr\u00e9e Minix un syst\u00e8me d'exploitation de \"type\" Unix (mais pas un d\u00e9riv\u00e9) \u00e0 des fins p\u00e9dagogiques pour remplacer le code source du Lion's Book avec Unix Time-sharing system 6 qu'il utilisait comme support de cours et dont AT&T interdit ensuite l'utilisation dans un cadre p\u00e9dagogique. bas\u00e9 sur un micro-noyau sous la licence BSD Support des x86 et Solaris SPARC 1997: Minix v2.x Retrait des protocoles r\u00e9seau Amoeba et ajout de TCP/IP Support des i386 32bits 2005: Minix v3.x Support des architectures IA-32 et ARM Disponibilit\u00e9 sur Live-CD Addition de X11 et des utilitaires Unix classiques Support de la m\u00e9moire dvirtuelle","title":"Minix"},{"location":"010-user/010-intro-presentation/010-introduction-history/#histoire-de-linux","text":"","title":"Histoire de Linux"},{"location":"010-user/010-intro-presentation/010-introduction-history/#linux","text":"1991: Linus Torvalds d\u00e9veloppe un noyau de syst\u00e8me d'exploitation ... qui prendra le nom de \u00ab noyau Linux \u00bb 25 ao\u00fbt 1991: annonce sur Usenet comp.os.minix le d\u00e9veloppement du noyau Linux. Linus Torvalds choisit de publier son noyau sous licence GNU GPL. Cette d\u00e9cision compatibles juridiquement les syst\u00e8mes GNU et Linux. Tombe au bon moment pour combler le vide dans le projet GNU (Hurd \u00e9tant inachev\u00e9) GNU et le noyau Linux sont d\u00e8s lors associ\u00e9s pour former un nouveau syst\u00e8me d'exploitation complet: GNU/Linux.","title":"Linux"},{"location":"010-user/010-intro-presentation/010-introduction-history/#le-systeme-gnu-linux","text":"Une famille de syst\u00e8mes d'exploitation Inspir\u00e9s d'unix Bas\u00e9s sur le projet GNU (1984) Bases sur le noyau Linux (1991) Constitu\u00e9s de logiciels libres et open-source","title":"Le syst\u00e8me GNU / Linux"},{"location":"010-user/010-intro-presentation/030-floss-ecosystem/","text":"Logiciel libre et \u00e9cosysteme # Avant le Libre # Philosophie Unix # Deux d\u00e9finitions : Doug McIlroy (1978) et Mike Gancarz (1994). \u00c9crivez des programmes qui font une seule chose mais qui le font bien. Concevez un prototype d\u00e8s que possible. Pr\u00e9f\u00e9rez la portabilit\u00e9 \u00e0 l'efficacit\u00e9. Stockez les donn\u00e9es en ASCII (format texte simple, facile \u00e0 manipuler) Utilisez le levier du logiciel \u00e0 votre avantage. Utilisez les scripts shell pour am\u00e9liorer la portabilit\u00e9. \u00c9vitez les interfaces utilisateur captives. Faites de chaque programme un filtre. Naissance du Libre # L'imprimante du MIT (1970) # Richard Mathew Stallman, chercheur au MIT Une imprimante Xerox avec un bug g\u00e9nant de bourrage papier... POSIX # 1978: Normalisation des Unix (l\u00e0 encore R.M.S !) Naissance du Libre # The GNU Manifesto (1983 et 1985) # What is GNU? Gnu's Not Unix! Why I Must Write GNU Why GNU Will Be Compatible with Unix How GNU Will Be Available Why Many Other Programmers Want to Help How You Can Contribute Why All Computer Users Will Benefit Some Easily Rebutted Objections to GNU's Goals https://www.gnu.org/gnu/manifesto.fr.html Free Software Foundation (1985) # Quatre libert\u00e9s # La libert\u00e9 d'ex\u00e9cuter le programme, pour tous les usages. La libert\u00e9 d'\u00e9tudier le fonctionnement du programme, et de l'adapter \u00e0 ses besoins. La libert\u00e9 de redistribuer des copies, donc d'aider son voisin. La libert\u00e9 d'am\u00e9liorer le programme et de publier des am\u00e9liorations, pour en faire profiter toute la communaut\u00e9. apolitique, a-moral, n\u00e9cessit\u00e9 d'acc\u00e8s au code source. Licence GPL et CopyLeft (1989) # Conflit Emacs vs Unipress (Gosmacs) Cr\u00e9ation d'un contrat de licence pour mieux cadrer le LL Objectifs: Garantir des libert\u00e9s Libert\u00e9s 0 \u00e0 3 du LL Contrainte de distribuer le code source au destinataires du logiciel Eben Moglen (Pr. de droit \u00e0 Columbia) Wikipedia Open-Source Initiative # Moins d'\u00e9thique et de philosophie, plus de pragmatiqme \"La cath\u00e9drale & le bazaar\", Eric Raymon (1999) Bruce Perens Les autres visions du Libre # MIT, BSD, etc.","title":"Logiciel libre et \u00e9cosysteme"},{"location":"010-user/010-intro-presentation/030-floss-ecosystem/#logiciel-libre-et-ecosysteme","text":"","title":"Logiciel libre et \u00e9cosysteme"},{"location":"010-user/010-intro-presentation/030-floss-ecosystem/#avant-le-libre","text":"","title":"Avant le Libre"},{"location":"010-user/010-intro-presentation/030-floss-ecosystem/#philosophie-unix","text":"Deux d\u00e9finitions : Doug McIlroy (1978) et Mike Gancarz (1994). \u00c9crivez des programmes qui font une seule chose mais qui le font bien. Concevez un prototype d\u00e8s que possible. Pr\u00e9f\u00e9rez la portabilit\u00e9 \u00e0 l'efficacit\u00e9. Stockez les donn\u00e9es en ASCII (format texte simple, facile \u00e0 manipuler) Utilisez le levier du logiciel \u00e0 votre avantage. Utilisez les scripts shell pour am\u00e9liorer la portabilit\u00e9. \u00c9vitez les interfaces utilisateur captives. Faites de chaque programme un filtre.","title":"Philosophie Unix"},{"location":"010-user/010-intro-presentation/030-floss-ecosystem/#naissance-du-libre","text":"","title":"Naissance du Libre"},{"location":"010-user/010-intro-presentation/030-floss-ecosystem/#limprimante-du-mit-1970","text":"Richard Mathew Stallman, chercheur au MIT Une imprimante Xerox avec un bug g\u00e9nant de bourrage papier...","title":"L'imprimante du MIT (1970)"},{"location":"010-user/010-intro-presentation/030-floss-ecosystem/#posix","text":"1978: Normalisation des Unix (l\u00e0 encore R.M.S !)","title":"POSIX"},{"location":"010-user/010-intro-presentation/030-floss-ecosystem/#naissance-du-libre_1","text":"","title":"Naissance du Libre"},{"location":"010-user/010-intro-presentation/030-floss-ecosystem/#the-gnu-manifesto-1983-et-1985","text":"What is GNU? Gnu's Not Unix! Why I Must Write GNU Why GNU Will Be Compatible with Unix How GNU Will Be Available Why Many Other Programmers Want to Help How You Can Contribute Why All Computer Users Will Benefit Some Easily Rebutted Objections to GNU's Goals https://www.gnu.org/gnu/manifesto.fr.html","title":"The GNU Manifesto (1983 et 1985)"},{"location":"010-user/010-intro-presentation/030-floss-ecosystem/#free-software-foundation-1985","text":"","title":"Free Software Foundation (1985)"},{"location":"010-user/010-intro-presentation/030-floss-ecosystem/#quatre-libertes","text":"La libert\u00e9 d'ex\u00e9cuter le programme, pour tous les usages. La libert\u00e9 d'\u00e9tudier le fonctionnement du programme, et de l'adapter \u00e0 ses besoins. La libert\u00e9 de redistribuer des copies, donc d'aider son voisin. La libert\u00e9 d'am\u00e9liorer le programme et de publier des am\u00e9liorations, pour en faire profiter toute la communaut\u00e9. apolitique, a-moral, n\u00e9cessit\u00e9 d'acc\u00e8s au code source.","title":"Quatre libert\u00e9s"},{"location":"010-user/010-intro-presentation/030-floss-ecosystem/#licence-gpl-et-copyleft-1989","text":"Conflit Emacs vs Unipress (Gosmacs) Cr\u00e9ation d'un contrat de licence pour mieux cadrer le LL Objectifs: Garantir des libert\u00e9s Libert\u00e9s 0 \u00e0 3 du LL Contrainte de distribuer le code source au destinataires du logiciel Eben Moglen (Pr. de droit \u00e0 Columbia) Wikipedia","title":"Licence GPL et CopyLeft (1989)"},{"location":"010-user/010-intro-presentation/030-floss-ecosystem/#open-source-initiative","text":"Moins d'\u00e9thique et de philosophie, plus de pragmatiqme \"La cath\u00e9drale & le bazaar\", Eric Raymon (1999) Bruce Perens","title":"Open-Source Initiative"},{"location":"010-user/010-intro-presentation/030-floss-ecosystem/#les-autres-visions-du-libre","text":"MIT, BSD, etc.","title":"Les autres visions du Libre"},{"location":"010-user/010-intro-presentation/040-distributions/","text":"Distributions # C'est quoi une distribution ? # un ensemble coh\u00e9rent de logiciels ... la plupart \u00e9tant des logiciels libres ... assembl\u00e9s autour du noyau Linux ... et du syst\u00e8me GNU Les distributions majeures # RHEL / CentOS / Fedora (ex-Redhat) OpenSuSe Slackware Mageia (ex-Mandriva, ex-Mandrake) Debian Ubuntu Mint ... Histoire des distributions # Choix d'une distribution GNU/Linux # Debian # Vue d'ensemble Philosophie Excellence technique Grande s\u00fbret\u00e9 du syst\u00e8me Une gestion des paquets \u00e9volu\u00e9e Le projet Une organisation Uniquement des b\u00e9n\u00e9voles Un but : d\u00e9velopper du logiciel libre Des engagements : contrat social , des directives , la charte Une distribution GNU/Linux, mais pas que... Plus de 43 000 paquets Sert de base \u00e0 Ubuntu , Mint ... Grand nombre... d'utilisateurs et de contributeurs de mat\u00e9riels support\u00e9s de tests de correctifs","title":"Distributions"},{"location":"010-user/010-intro-presentation/040-distributions/#distributions","text":"","title":"Distributions"},{"location":"010-user/010-intro-presentation/040-distributions/#cest-quoi-une-distribution","text":"un ensemble coh\u00e9rent de logiciels ... la plupart \u00e9tant des logiciels libres ... assembl\u00e9s autour du noyau Linux ... et du syst\u00e8me GNU","title":"C'est quoi une distribution ?"},{"location":"010-user/010-intro-presentation/040-distributions/#les-distributions-majeures","text":"RHEL / CentOS / Fedora (ex-Redhat) OpenSuSe Slackware Mageia (ex-Mandriva, ex-Mandrake) Debian Ubuntu Mint ...","title":"Les distributions majeures"},{"location":"010-user/010-intro-presentation/040-distributions/#histoire-des-distributions","text":"","title":"Histoire des distributions"},{"location":"010-user/010-intro-presentation/040-distributions/#choix-dune-distribution-gnulinux","text":"","title":"Choix d'une distribution GNU/Linux"},{"location":"010-user/010-intro-presentation/040-distributions/#debian","text":"Vue d'ensemble Philosophie Excellence technique Grande s\u00fbret\u00e9 du syst\u00e8me Une gestion des paquets \u00e9volu\u00e9e Le projet Une organisation Uniquement des b\u00e9n\u00e9voles Un but : d\u00e9velopper du logiciel libre Des engagements : contrat social , des directives , la charte Une distribution GNU/Linux, mais pas que... Plus de 43 000 paquets Sert de base \u00e0 Ubuntu , Mint ... Grand nombre... d'utilisateurs et de contributeurs de mat\u00e9riels support\u00e9s de tests de correctifs","title":"Debian"},{"location":"010-user/020-commandes-base/","text":"Commandes de base # Les aides (-h, --help, man, info, tldr, cht.sh) exit, logout id, who, whoami clear ls, cd, pwd, pushd, popd touch, mkdir, rmdir, cp, mv, rm cat, more, less, head, tail, cut, grep, tac, rev Les liens, symboliques, durs echo, sleep, uname, date, hostname Les alias Les m\u00e9ta-caract\u00e8res nom_utilisateur@ordinateur (exemple : vagrant@db-server) : permet de seretrouver entre utilisateurs, et machine utilis\u00e9e, etc.","title":"Commandes de base"},{"location":"010-user/020-commandes-base/#commandes-de-base","text":"Les aides (-h, --help, man, info, tldr, cht.sh) exit, logout id, who, whoami clear ls, cd, pwd, pushd, popd touch, mkdir, rmdir, cp, mv, rm cat, more, less, head, tail, cut, grep, tac, rev Les liens, symboliques, durs echo, sleep, uname, date, hostname Les alias Les m\u00e9ta-caract\u00e8res nom_utilisateur@ordinateur (exemple : vagrant@db-server) : permet de seretrouver entre utilisateurs, et machine utilis\u00e9e, etc.","title":"Commandes de base"},{"location":"010-user/020-commandes-base/10-le-prompt/","text":"Invite de commande # Id\u00e9e g\u00e9n\u00e9rale # Une interface entre l'homme et la machine On tape des commandes dans le prompt d'un shell Un ex\u00e9cutable est appel\u00e9 Un r\u00e9sultat s'affiche (ou pas) Format : nom-de-l-action \u2192 objet-de-l'action-1 ... commande [parametres optionnels] parametres obligatoires Comme Siri, mais en texte La forme du prompt # Le \"r\u00f4le\" de l'utilisateur actuel est indiqu\u00e9 par le suffixe $ : utilisateur # : admin (attention \u00e0 pas \u00e9crire de conneries, pas de demande de validation) Autres \u00e9l\u00e9ments de l'invite de commande : utilisateur@machine : nom de l'utilisateur, nom de la machine chemin courant : ~ (ou autre en fonction du dossier courant) Les commandes # attention, la casse compte ! les # permette de mettre des commentaires. Tout ce qui est apr\u00e8s le # est ignor\u00e9 par le shell. Pour nettoyer l'\u00e9cran # Commande reset : efface ce qui est visible \u00e0 l'\u00e9cran et r\u00e9initialise les param\u00e8tres du terminal Commande clear : efface ce qui est visible \u00e0 l'\u00e9cran CTRL-L : \u00e9quivalent de clear Pour stopper une commande # CTRL-C permet d\u2019arr\u00eater un processus en cours de fonctionnement (ex : yes, rm -fr ou autre..) Pour quitter # pour quitter, taper \"exit\" ou CTRL-D Trouver de l'aide # Affiche une breve description de la commande whatis COMMANDE $ whatis bash bash (1) - Interpr\u00e9teur de commandes GNU Bourne-Again SHell Affiche le manuel d'utilisation de la COMMANDE man COMMANDE Affiche la documentation d'utilisation de la commande info COMMANDE Man page simplifi\u00e9e tldr COMMANDE Cheat-sheet curl cht.sh/COMMANDE Voir aussi dans /usr/share/doc/PACKAGE-DE-LA-COMMANDE ... en rempla\u00e7ant commande par le nom de l'application sur laquelle vous cherchez des informations. Note: dans la documentation [...] est une partie optionnelle de la commande","title":"Invite de commande"},{"location":"010-user/020-commandes-base/10-le-prompt/#invite-de-commande","text":"","title":"Invite de commande"},{"location":"010-user/020-commandes-base/10-le-prompt/#idee-generale","text":"Une interface entre l'homme et la machine On tape des commandes dans le prompt d'un shell Un ex\u00e9cutable est appel\u00e9 Un r\u00e9sultat s'affiche (ou pas) Format : nom-de-l-action \u2192 objet-de-l'action-1 ... commande [parametres optionnels] parametres obligatoires Comme Siri, mais en texte","title":"Id\u00e9e g\u00e9n\u00e9rale"},{"location":"010-user/020-commandes-base/10-le-prompt/#la-forme-du-prompt","text":"Le \"r\u00f4le\" de l'utilisateur actuel est indiqu\u00e9 par le suffixe $ : utilisateur # : admin (attention \u00e0 pas \u00e9crire de conneries, pas de demande de validation) Autres \u00e9l\u00e9ments de l'invite de commande : utilisateur@machine : nom de l'utilisateur, nom de la machine chemin courant : ~ (ou autre en fonction du dossier courant)","title":"La forme du prompt"},{"location":"010-user/020-commandes-base/10-le-prompt/#les-commandes","text":"attention, la casse compte ! les # permette de mettre des commentaires. Tout ce qui est apr\u00e8s le # est ignor\u00e9 par le shell.","title":"Les commandes"},{"location":"010-user/020-commandes-base/10-le-prompt/#pour-nettoyer-lecran","text":"Commande reset : efface ce qui est visible \u00e0 l'\u00e9cran et r\u00e9initialise les param\u00e8tres du terminal Commande clear : efface ce qui est visible \u00e0 l'\u00e9cran CTRL-L : \u00e9quivalent de clear","title":"Pour nettoyer l'\u00e9cran"},{"location":"010-user/020-commandes-base/10-le-prompt/#pour-stopper-une-commande","text":"CTRL-C permet d\u2019arr\u00eater un processus en cours de fonctionnement (ex : yes, rm -fr ou autre..)","title":"Pour stopper une commande"},{"location":"010-user/020-commandes-base/10-le-prompt/#pour-quitter","text":"pour quitter, taper \"exit\" ou CTRL-D","title":"Pour quitter"},{"location":"010-user/020-commandes-base/10-le-prompt/#trouver-de-laide","text":"Affiche une breve description de la commande whatis COMMANDE $ whatis bash bash (1) - Interpr\u00e9teur de commandes GNU Bourne-Again SHell Affiche le manuel d'utilisation de la COMMANDE man COMMANDE Affiche la documentation d'utilisation de la commande info COMMANDE Man page simplifi\u00e9e tldr COMMANDE Cheat-sheet curl cht.sh/COMMANDE Voir aussi dans /usr/share/doc/PACKAGE-DE-LA-COMMANDE ... en rempla\u00e7ant commande par le nom de l'application sur laquelle vous cherchez des informations. Note: dans la documentation [...] est une partie optionnelle de la commande","title":"Trouver de l'aide"},{"location":"010-user/020-commandes-base/20-navigation/","text":"Navigation dans l'arborescence # Vue d'ensemble # Notion de chemin # Liste de d\u00e9placements s\u00e9par\u00e9s par des / . = dossier en lui-m\u00eame, dossier dans lequel on est .. remonter dans l'arborescence = dossier parent x => descendre dans le dossier x Il est d'usage d'indiquer / \u00e0 la fin du nom d'un dossier rien pour un fichier Cette syntaxe est parfois utilis\u00e9e par le shell (en plus des couleurs) pour faciliter la lecture Chemin absolu # D\u00e9placement \u00e0 partir de la racine du systeme Commencent TOUJOURS par un slash / Le chemin absolu vers un fichier est toujours le m\u00eame Chemins relatifs # D\u00e9placement \u00e0 partir de votre dossier de travail Ne commencent JAMAIS par un slash / Mais le ./ de d\u00e9part est optionnel Se localiser # La commande pwd (path of working directory = o\u00f9 suis-je en train de travailler) $ pwd /home/batman/Documents Se d\u00e9placer # Changer de dossier de travail ( change directory ) cd DESTINATION Avec chemins absolus # $ cd /home/batman/documents $ cd /usr/share/doc Avec chemins relatifs # $ cd .. $ cd ../documents Cas particuliers # Revenir au r\u00e9pertoire pr\u00e9c\u00e9dent \ud83d\udd19 $ cd - Aller au r\u00e9pertoire de l'utilisateur ($HOME) \ud83c\udfe0 $ cd ~/ ou $ cd Attention aux espaces # $ cd \"nouveau repertoire avec des espaces\" $ cd nouveau\\ repertoire\\ avec\\ des\\ espaces Attention aux tirets # $ cd -- \\-StupidFile Lister les fichiers d'un r\u00e9pertoire # La commande ls ( list ) ls [options] [objets] $ ls Liste avec aide sur la nature du fichier $ ls -f Liste d\u00e9taill\u00e9e $ ls -l $ ls -l /etc Liste complete (avec fichiers cach\u00e9s) $ ls -a Liste recursive $ ls -R $ ls -R /var/www Note: on peut utiliser plusieurs de ces options en meme temps Nature des fichiers # C'est indiqu\u00e9 dans la r\u00e9ponse du ls -l b = p\u00e9riph\u00e9rique de type bloc (possible de se ballader d'un endroit \u00e0 l'autre d'un disque dur ou un autre p\u00e9riph\u00e9rique). taille minimale d\u00e9finie par le systeme (ex 4096 octet), un bloc est allou\u00e9 au fichier, qu'il soit entierement utilis\u00e9 ou non. c = p\u00e9riph\u00e9rique de type caract\u00e8re (lecture donn\u00e9e une par une, comme via une paille) d = directory, dossier l = version lien, redirection, nom \"raccourci\" - = fichier, Note.2: Unix n'a pas besoin des extensions de fichier pour savoir ce qu'il y a dans un fichier (voir la commande \"file\" qui permet de d\u00e9tecter la nature d'un fichier d'apr\u00e8ss on contenu) Recherche de fichier # Commande : find DOSSIER Trouve les dossiers et fichiers attention, sur LINUX par d\u00e9faut il le cherche dans le dosser courant, sur les vrais UNIX il faut rajouter \".\" apr\u00e8s le find. On peut ajouter des filtres pour pr\u00e9ciser la recherche ! -type f pour lister les fichiers -type d pour les dossiers -name 'quelquechose' pour trouver les noms contenant 'quelquechose' utiliser le caractere g\u00e9n\u00e9rique * si on ne sais pas un bout du nom ex : find . -name '*man' -mindepth X OU -maxdepth OU -level : pour rechercher \u00e0 un niveau pr\u00e9cis On peut \u00e9galement chercher dans plusieurs dossier en meme temps find DOSSIER1/ DOSSIER2/ La commande retourne l'union des r\u00e9sultats pour chaque dossiers COMMANDE: whoami = qui suis-je ? (retourne le nom utilisateur) \ud83e\udd13 COMMANDE hostname retourne le nom du serveur Contenu des fichiers # Afficher le contenu d'un fichier # En entier $ cat ~/ToDo.txt ... seulement son d\u00e9but $ head ~/www/logs/access $ head -n 20 ~/www/logs/error ... ou seulement sa fin $ tail ~/www/logs/access $ tail -n 20 ~/www/logs/access $ tail -f ~/www/logs/error Contenu des fichiers # Rechercher des fichiers # La commande grep $ grep 'Catwoman' ~/realVillains.txt $ grep -r 'Catwoman' ~/villains/ $ egrep '(Catwoman|Poison Ivy)' ~/recentCrimes.txt La commande find $ find ~/documents/ -name \\* .html $ find ~/www/ -name \\* .html -or -name \\* .txt -exec grep -H {} \\; Variables d'environnement # Alias de commandes (1/2) # D\u00e9finition : alias nom-alias=\"longue commande \u00e0 remplacer\" Exemples de d\u00e9finitions : alias lls=\"ls -l\" alias filter_video=\"egrep -i '\\.(avi|mov|mpe?g|mkv|wmv|rm)$'\" alias filter_audio=\"egrep -i '\\.(wav|flac|mp3|aac|m4a|ogg|wma)$'\" alias filter_image=\"egrep -i '\\.(jpe?g|png|xcf(.gz)|eps|svg|gif)$'\" Alias de commandes (2/2) # Exemple d'usage: $ lls ... $ find |filter_video R\u00e9f\u00e9rences # R\u00e9f\u00e9rence shell (csoft)","title":"Navigation dans l'arborescence"},{"location":"010-user/020-commandes-base/20-navigation/#navigation-dans-larborescence","text":"","title":"Navigation dans l'arborescence"},{"location":"010-user/020-commandes-base/20-navigation/#vue-densemble","text":"","title":"Vue d'ensemble"},{"location":"010-user/020-commandes-base/20-navigation/#notion-de-chemin","text":"Liste de d\u00e9placements s\u00e9par\u00e9s par des / . = dossier en lui-m\u00eame, dossier dans lequel on est .. remonter dans l'arborescence = dossier parent x => descendre dans le dossier x Il est d'usage d'indiquer / \u00e0 la fin du nom d'un dossier rien pour un fichier Cette syntaxe est parfois utilis\u00e9e par le shell (en plus des couleurs) pour faciliter la lecture","title":"Notion de chemin"},{"location":"010-user/020-commandes-base/20-navigation/#chemin-absolu","text":"D\u00e9placement \u00e0 partir de la racine du systeme Commencent TOUJOURS par un slash / Le chemin absolu vers un fichier est toujours le m\u00eame","title":"Chemin absolu"},{"location":"010-user/020-commandes-base/20-navigation/#chemins-relatifs","text":"D\u00e9placement \u00e0 partir de votre dossier de travail Ne commencent JAMAIS par un slash / Mais le ./ de d\u00e9part est optionnel","title":"Chemins relatifs"},{"location":"010-user/020-commandes-base/20-navigation/#se-localiser","text":"La commande pwd (path of working directory = o\u00f9 suis-je en train de travailler) $ pwd /home/batman/Documents","title":"Se localiser"},{"location":"010-user/020-commandes-base/20-navigation/#se-deplacer","text":"Changer de dossier de travail ( change directory ) cd DESTINATION","title":"Se d\u00e9placer"},{"location":"010-user/020-commandes-base/20-navigation/#avec-chemins-absolus","text":"$ cd /home/batman/documents $ cd /usr/share/doc","title":"Avec chemins absolus"},{"location":"010-user/020-commandes-base/20-navigation/#avec-chemins-relatifs","text":"$ cd .. $ cd ../documents","title":"Avec chemins relatifs"},{"location":"010-user/020-commandes-base/20-navigation/#cas-particuliers","text":"Revenir au r\u00e9pertoire pr\u00e9c\u00e9dent \ud83d\udd19 $ cd - Aller au r\u00e9pertoire de l'utilisateur ($HOME) \ud83c\udfe0 $ cd ~/ ou $ cd","title":"Cas particuliers"},{"location":"010-user/020-commandes-base/20-navigation/#attention-aux-espaces","text":"$ cd \"nouveau repertoire avec des espaces\" $ cd nouveau\\ repertoire\\ avec\\ des\\ espaces","title":"Attention aux espaces"},{"location":"010-user/020-commandes-base/20-navigation/#attention-aux-tirets","text":"$ cd -- \\-StupidFile","title":"Attention aux tirets"},{"location":"010-user/020-commandes-base/20-navigation/#lister-les-fichiers-dun-repertoire","text":"La commande ls ( list ) ls [options] [objets] $ ls Liste avec aide sur la nature du fichier $ ls -f Liste d\u00e9taill\u00e9e $ ls -l $ ls -l /etc Liste complete (avec fichiers cach\u00e9s) $ ls -a Liste recursive $ ls -R $ ls -R /var/www Note: on peut utiliser plusieurs de ces options en meme temps","title":"Lister les fichiers d'un r\u00e9pertoire"},{"location":"010-user/020-commandes-base/20-navigation/#nature-des-fichiers","text":"C'est indiqu\u00e9 dans la r\u00e9ponse du ls -l b = p\u00e9riph\u00e9rique de type bloc (possible de se ballader d'un endroit \u00e0 l'autre d'un disque dur ou un autre p\u00e9riph\u00e9rique). taille minimale d\u00e9finie par le systeme (ex 4096 octet), un bloc est allou\u00e9 au fichier, qu'il soit entierement utilis\u00e9 ou non. c = p\u00e9riph\u00e9rique de type caract\u00e8re (lecture donn\u00e9e une par une, comme via une paille) d = directory, dossier l = version lien, redirection, nom \"raccourci\" - = fichier, Note.2: Unix n'a pas besoin des extensions de fichier pour savoir ce qu'il y a dans un fichier (voir la commande \"file\" qui permet de d\u00e9tecter la nature d'un fichier d'apr\u00e8ss on contenu)","title":"Nature des fichiers"},{"location":"010-user/020-commandes-base/20-navigation/#recherche-de-fichier","text":"Commande : find DOSSIER Trouve les dossiers et fichiers attention, sur LINUX par d\u00e9faut il le cherche dans le dosser courant, sur les vrais UNIX il faut rajouter \".\" apr\u00e8s le find. On peut ajouter des filtres pour pr\u00e9ciser la recherche ! -type f pour lister les fichiers -type d pour les dossiers -name 'quelquechose' pour trouver les noms contenant 'quelquechose' utiliser le caractere g\u00e9n\u00e9rique * si on ne sais pas un bout du nom ex : find . -name '*man' -mindepth X OU -maxdepth OU -level : pour rechercher \u00e0 un niveau pr\u00e9cis On peut \u00e9galement chercher dans plusieurs dossier en meme temps find DOSSIER1/ DOSSIER2/ La commande retourne l'union des r\u00e9sultats pour chaque dossiers COMMANDE: whoami = qui suis-je ? (retourne le nom utilisateur) \ud83e\udd13 COMMANDE hostname retourne le nom du serveur","title":"Recherche de fichier"},{"location":"010-user/020-commandes-base/20-navigation/#contenu-des-fichiers","text":"","title":"Contenu des fichiers"},{"location":"010-user/020-commandes-base/20-navigation/#afficher-le-contenu-dun-fichier","text":"En entier $ cat ~/ToDo.txt ... seulement son d\u00e9but $ head ~/www/logs/access $ head -n 20 ~/www/logs/error ... ou seulement sa fin $ tail ~/www/logs/access $ tail -n 20 ~/www/logs/access $ tail -f ~/www/logs/error","title":"Afficher le contenu d'un fichier"},{"location":"010-user/020-commandes-base/20-navigation/#contenu-des-fichiers_1","text":"","title":"Contenu des fichiers"},{"location":"010-user/020-commandes-base/20-navigation/#rechercher-des-fichiers","text":"La commande grep $ grep 'Catwoman' ~/realVillains.txt $ grep -r 'Catwoman' ~/villains/ $ egrep '(Catwoman|Poison Ivy)' ~/recentCrimes.txt La commande find $ find ~/documents/ -name \\* .html $ find ~/www/ -name \\* .html -or -name \\* .txt -exec grep -H {} \\;","title":"Rechercher des fichiers"},{"location":"010-user/020-commandes-base/20-navigation/#variables-denvironnement","text":"","title":"Variables d'environnement"},{"location":"010-user/020-commandes-base/20-navigation/#alias-de-commandes-12","text":"D\u00e9finition : alias nom-alias=\"longue commande \u00e0 remplacer\" Exemples de d\u00e9finitions : alias lls=\"ls -l\" alias filter_video=\"egrep -i '\\.(avi|mov|mpe?g|mkv|wmv|rm)$'\" alias filter_audio=\"egrep -i '\\.(wav|flac|mp3|aac|m4a|ogg|wma)$'\" alias filter_image=\"egrep -i '\\.(jpe?g|png|xcf(.gz)|eps|svg|gif)$'\"","title":"Alias de commandes (1/2)"},{"location":"010-user/020-commandes-base/20-navigation/#alias-de-commandes-22","text":"Exemple d'usage: $ lls ... $ find |filter_video","title":"Alias de commandes (2/2)"},{"location":"010-user/020-commandes-base/20-navigation/#references","text":"R\u00e9f\u00e9rence shell (csoft)","title":"R\u00e9f\u00e9rences"},{"location":"010-user/020-commandes-base/30-organize-files/","text":"Organisation des fichiers # Cr\u00e9er un fichier # Cr\u00e9er un fichier vide : touch $ touch EmptyFile Si d\u00e9ja existant, en change la date de cr\u00e9ation Cr\u00e9er un r\u00e9pertoire # Cr\u00e9er un r\u00e9pertoire : mkdir $ mkdir nouveau-repertoire Cr\u00e9er une arborescence avec tous les r\u00e9pertoires interm\u00e9diaires ( path ) $ mkdir -p repertoire/sous-repertoire/et-sous-sous-r\u00e9pertoire Supprimer (un fichier ou un r\u00e9pertoire) # $ rm fichierVide $ rm -r dossierQuelconque Attention : pas de confirmation sans le param\u00e8tre -i $ rm -ir nouveauDossier D\u00e9placer un fichier ou un r\u00e9pertoire # $ mv fichierQuelconque fichierDestination $ mv fichierQuelconque ~/documents/ $ mv repertoireQuelconque ~/documents/ Attention : avec la derni\u00e8re commande, que se passe-t-il si le dossier ~/documents existe d\u00e9j\u00e0 ? Copier un fichier ou un r\u00e9pertoire # $ cp fichierQuelconque nouveauFichier $ cp Image.jpg ~/www/images/ $ cp repertoireQuelconque ~/documents/ Attention : avec la derni\u00e8re commande, que se passe-t-il si le dossier ~/documents existe d\u00e9j\u00e0 ? Liens # Liens symboliques : ln $ ln -s monFichier lienVersMonFichier $ ln -s monRepertoire lienVersMonRepertoire Liens durs : ln (encore) $ ln MyFile LinkToMyFile Commande : mv SOURCE DESTINATION Organisation de contenus Commande mv FICHIER FICHIER1 FICHER2 ..... DOSSIER - si dossier(s) existant(s), d\u00e9place fichier dans le dossier Commande mv FICHIER1 FICHIER2 renomme fichier1 en fichier2 (quand fichier2 n'est pas un dossier, juste un autre nom inexistant) pas forc\u00e9ment au bon endroit pour CP et RM -> plus dans organisation de contenu ?? on prendrait pas les notes dans le home puis on r\u00e9organiserait pour simplifier ? OK Commande cp SOURCE DESTINATION copie le fichier ou dossier SOURCE vers le fichier ou dossier DESTINATION. Si DESTINATION est un dossier existant, SOURCE est copi\u00e9 dedans. Si DESTINATION n'existe pas, SOURCE est copi\u00e9 et renomm\u00e9 en DESTINATION. ex : cp heroes/robin/about.txt vilains/penguins/resume.txt => copie le about.txt en changeant son nom en resume.txt Commande rm FICHIER Efface le fichier FICHIER Options: -r pour effacer les dossiers r\u00e9curcivement (donc m\u00eame si le dossier en question n'est pas vide) -f (=force) pour effacer avec violence (plus fort que le i, meme si activ\u00e9 par d\u00e9faut) -i interactif, il demande \u00e0 confirmer pour chaque dossier. peut etre mis par defaut dans la config exemple : rm -rf / => Efface tout (TOUS LES FICHIERS, SANS CONFIRMATION)","title":"Organisation des fichiers"},{"location":"010-user/020-commandes-base/30-organize-files/#organisation-des-fichiers","text":"","title":"Organisation des fichiers"},{"location":"010-user/020-commandes-base/30-organize-files/#creer-un-fichier","text":"Cr\u00e9er un fichier vide : touch $ touch EmptyFile Si d\u00e9ja existant, en change la date de cr\u00e9ation","title":"Cr\u00e9er un fichier"},{"location":"010-user/020-commandes-base/30-organize-files/#creer-un-repertoire","text":"Cr\u00e9er un r\u00e9pertoire : mkdir $ mkdir nouveau-repertoire Cr\u00e9er une arborescence avec tous les r\u00e9pertoires interm\u00e9diaires ( path ) $ mkdir -p repertoire/sous-repertoire/et-sous-sous-r\u00e9pertoire","title":"Cr\u00e9er un r\u00e9pertoire"},{"location":"010-user/020-commandes-base/30-organize-files/#supprimer-un-fichier-ou-un-repertoire","text":"$ rm fichierVide $ rm -r dossierQuelconque Attention : pas de confirmation sans le param\u00e8tre -i $ rm -ir nouveauDossier","title":"Supprimer (un fichier ou un r\u00e9pertoire)"},{"location":"010-user/020-commandes-base/30-organize-files/#deplacer-un-fichier-ou-un-repertoire","text":"$ mv fichierQuelconque fichierDestination $ mv fichierQuelconque ~/documents/ $ mv repertoireQuelconque ~/documents/ Attention : avec la derni\u00e8re commande, que se passe-t-il si le dossier ~/documents existe d\u00e9j\u00e0 ?","title":"D\u00e9placer un fichier ou un r\u00e9pertoire"},{"location":"010-user/020-commandes-base/30-organize-files/#copier-un-fichier-ou-un-repertoire","text":"$ cp fichierQuelconque nouveauFichier $ cp Image.jpg ~/www/images/ $ cp repertoireQuelconque ~/documents/ Attention : avec la derni\u00e8re commande, que se passe-t-il si le dossier ~/documents existe d\u00e9j\u00e0 ?","title":"Copier un fichier ou un r\u00e9pertoire"},{"location":"010-user/020-commandes-base/30-organize-files/#liens","text":"Liens symboliques : ln $ ln -s monFichier lienVersMonFichier $ ln -s monRepertoire lienVersMonRepertoire Liens durs : ln (encore) $ ln MyFile LinkToMyFile Commande : mv SOURCE DESTINATION Organisation de contenus Commande mv FICHIER FICHIER1 FICHER2 ..... DOSSIER - si dossier(s) existant(s), d\u00e9place fichier dans le dossier Commande mv FICHIER1 FICHIER2 renomme fichier1 en fichier2 (quand fichier2 n'est pas un dossier, juste un autre nom inexistant) pas forc\u00e9ment au bon endroit pour CP et RM -> plus dans organisation de contenu ?? on prendrait pas les notes dans le home puis on r\u00e9organiserait pour simplifier ? OK Commande cp SOURCE DESTINATION copie le fichier ou dossier SOURCE vers le fichier ou dossier DESTINATION. Si DESTINATION est un dossier existant, SOURCE est copi\u00e9 dedans. Si DESTINATION n'existe pas, SOURCE est copi\u00e9 et renomm\u00e9 en DESTINATION. ex : cp heroes/robin/about.txt vilains/penguins/resume.txt => copie le about.txt en changeant son nom en resume.txt Commande rm FICHIER Efface le fichier FICHIER Options: -r pour effacer les dossiers r\u00e9curcivement (donc m\u00eame si le dossier en question n'est pas vide) -f (=force) pour effacer avec violence (plus fort que le i, meme si activ\u00e9 par d\u00e9faut) -i interactif, il demande \u00e0 confirmer pour chaque dossier. peut etre mis par defaut dans la config exemple : rm -rf / => Efface tout (TOUS LES FICHIERS, SANS CONFIRMATION)","title":"Liens"},{"location":"010-user/020-commandes-base/40-edit-files/","text":"\u00c9dition de fichiers # Lister le contenu # Editer # Ed # Le premier \u00e9diteur sous unix. Mono ligne Si vous n'avez pas deux PhD il y a peu de chance que vous arriviez \u00e0 l'utiliser. Vi(m) # Utilisation de l'\u00e9diteur VI (COMMANDE: vi) Permet d'\u00e9diter des fichiers (texte, code, ....) : ancien, fonctionnel et mis \u00e0 jour. existe depuis 1976, sur tous les unix 3 modes: commande (de base), commence par \":\" (possibilit\u00e9 d'y retourner avec \u00e9chap si autre mode activ\u00e9) :w = > write :e => edit :q => quit ! => force la commande (ex: :q! => quitte de force sans enregistrer) visuel (v), edition (i => insertion, a => append, r=> replace, etc.) Possibilit\u00e9 de combiner des fonctions. (voir Emacs pour l'autre c\u00e9l\u00e8bre editeur, qui existe aussi depuis 1976, mais seulement sur les syst\u00e8mes GNU et pas forc\u00e9ment par d\u00e9faut) version am\u00e9lior\u00e9e : vim, puis actuellement en r\u00e9alisation neovim Nano # Editeur r\u00e9cent, s'utilise comme word. gentil, mais attention replie pas les lignes Permet d'\u00e9diter des fichiers","title":"\u00c9dition de fichiers"},{"location":"010-user/020-commandes-base/40-edit-files/#edition-de-fichiers","text":"","title":"\u00c9dition de fichiers"},{"location":"010-user/020-commandes-base/40-edit-files/#lister-le-contenu","text":"","title":"Lister le contenu"},{"location":"010-user/020-commandes-base/40-edit-files/#editer","text":"","title":"Editer"},{"location":"010-user/020-commandes-base/40-edit-files/#ed","text":"Le premier \u00e9diteur sous unix. Mono ligne Si vous n'avez pas deux PhD il y a peu de chance que vous arriviez \u00e0 l'utiliser.","title":"Ed"},{"location":"010-user/020-commandes-base/40-edit-files/#vim","text":"Utilisation de l'\u00e9diteur VI (COMMANDE: vi) Permet d'\u00e9diter des fichiers (texte, code, ....) : ancien, fonctionnel et mis \u00e0 jour. existe depuis 1976, sur tous les unix 3 modes: commande (de base), commence par \":\" (possibilit\u00e9 d'y retourner avec \u00e9chap si autre mode activ\u00e9) :w = > write :e => edit :q => quit ! => force la commande (ex: :q! => quitte de force sans enregistrer) visuel (v), edition (i => insertion, a => append, r=> replace, etc.) Possibilit\u00e9 de combiner des fonctions. (voir Emacs pour l'autre c\u00e9l\u00e8bre editeur, qui existe aussi depuis 1976, mais seulement sur les syst\u00e8mes GNU et pas forc\u00e9ment par d\u00e9faut) version am\u00e9lior\u00e9e : vim, puis actuellement en r\u00e9alisation neovim","title":"Vi(m)"},{"location":"010-user/020-commandes-base/40-edit-files/#nano","text":"Editeur r\u00e9cent, s'utilise comme word. gentil, mais attention replie pas les lignes Permet d'\u00e9diter des fichiers","title":"Nano"},{"location":"010-user/020-commandes-base/50-more-on-files/","text":"Manipulation de fichiers # Nature d'un contenu # Analyseur de fichier (de quelle nature est le truc qu'on lui donne) file FICHIER Lire un fichier # \"lit le fichier\" QUOI = regarde dans le fichier \ud83e\uddd0 cat [FICHIER] cat motd : affiche le message of the day (premier truc qui s'affiche en se connectant) cat etc/passwrd : affiche les utilisateurs de la machine ( et non aps les mots de passe) Filtrer un fichier # grep MOTIF [FICHIER] Options: -n : affiche les num\u00e9ros de ligne -r : cherche r\u00e9cursivement Lire un fichier, \u00e0 l'envers (verticalement) # Affiche le contenu un fichier dans l'ordre inverse des lignes tac [FICHIER] Lire un fichier, \u00e0 l'envers (horizontalement) # Retourne horizontalement (le sens du texte) rev [FICHIER] Compte les lignes, les mots, etc. # word count, compte le nombre de mots wc [FICHIER] Options : -c caracteres (y compris ponctuation) -l lignes Afficher le d\u00e9but # Attrape le d\u00e9but du fichier jusqu'a la X sp\u00e9cifi\u00e9e head [FICHIER] Optiona -n 3 : attrape les 3 premi\u00e8res lignes du fichier -c 3 : attrape les 3 premiers caract\u00e8res Afficher la fin # Attrape la fin du fichier (fonctionne comme head) tail [FICHIER] Couper (verticalement) # Coupe le fichier (pour en faire comme un tableau), destin\u00e9e \u00e0 la manipulation de contenu. cut [FICHIER] Options: -d d\u00e9limiteur -f field : permet de retourner la partie voulue entre les diff\u00e9rents d\u00e9limiteurs Transliterer # Remplacer un ensemble de caracteres par un autre tr tr 'a-z' 'A-Z' : remplace les minuscules par les majuscules tr '\u00e9\u00e8\u00eb' 'eee': remplace les e \u00e0 accent par e","title":"Manipulation de fichiers"},{"location":"010-user/020-commandes-base/50-more-on-files/#manipulation-de-fichiers","text":"","title":"Manipulation de fichiers"},{"location":"010-user/020-commandes-base/50-more-on-files/#nature-dun-contenu","text":"Analyseur de fichier (de quelle nature est le truc qu'on lui donne) file FICHIER","title":"Nature d'un contenu"},{"location":"010-user/020-commandes-base/50-more-on-files/#lire-un-fichier","text":"\"lit le fichier\" QUOI = regarde dans le fichier \ud83e\uddd0 cat [FICHIER] cat motd : affiche le message of the day (premier truc qui s'affiche en se connectant) cat etc/passwrd : affiche les utilisateurs de la machine ( et non aps les mots de passe)","title":"Lire un fichier"},{"location":"010-user/020-commandes-base/50-more-on-files/#filtrer-un-fichier","text":"grep MOTIF [FICHIER] Options: -n : affiche les num\u00e9ros de ligne -r : cherche r\u00e9cursivement","title":"Filtrer un fichier"},{"location":"010-user/020-commandes-base/50-more-on-files/#lire-un-fichier-a-lenvers-verticalement","text":"Affiche le contenu un fichier dans l'ordre inverse des lignes tac [FICHIER]","title":"Lire un fichier, \u00e0 l'envers (verticalement)"},{"location":"010-user/020-commandes-base/50-more-on-files/#lire-un-fichier-a-lenvers-horizontalement","text":"Retourne horizontalement (le sens du texte) rev [FICHIER]","title":"Lire un fichier, \u00e0 l'envers (horizontalement)"},{"location":"010-user/020-commandes-base/50-more-on-files/#compte-les-lignes-les-mots-etc","text":"word count, compte le nombre de mots wc [FICHIER] Options : -c caracteres (y compris ponctuation) -l lignes","title":"Compte les lignes, les mots, etc."},{"location":"010-user/020-commandes-base/50-more-on-files/#afficher-le-debut","text":"Attrape le d\u00e9but du fichier jusqu'a la X sp\u00e9cifi\u00e9e head [FICHIER] Optiona -n 3 : attrape les 3 premi\u00e8res lignes du fichier -c 3 : attrape les 3 premiers caract\u00e8res","title":"Afficher le d\u00e9but"},{"location":"010-user/020-commandes-base/50-more-on-files/#afficher-la-fin","text":"Attrape la fin du fichier (fonctionne comme head) tail [FICHIER]","title":"Afficher la fin"},{"location":"010-user/020-commandes-base/50-more-on-files/#couper-verticalement","text":"Coupe le fichier (pour en faire comme un tableau), destin\u00e9e \u00e0 la manipulation de contenu. cut [FICHIER] Options: -d d\u00e9limiteur -f field : permet de retourner la partie voulue entre les diff\u00e9rents d\u00e9limiteurs","title":"Couper (verticalement)"},{"location":"010-user/020-commandes-base/50-more-on-files/#transliterer","text":"Remplacer un ensemble de caracteres par un autre tr tr 'a-z' 'A-Z' : remplace les minuscules par les majuscules tr '\u00e9\u00e8\u00eb' 'eee': remplace les e \u00e0 accent par e","title":"Transliterer"},{"location":"010-user/030-tubes-redirections/","text":"Descripteurs, tubes et redirections #","title":"Descripteurs, tubes et redirections"},{"location":"010-user/030-tubes-redirections/#descripteurs-tubes-et-redirections","text":"","title":"Descripteurs, tubes et redirections"},{"location":"010-user/030-tubes-redirections/20-pipes-redirections/","text":"Descripteurs de fichiers # Principes de fonctionnement # Un processus 3 descripteurs par d\u00e9faut : STDIN, STDOUT, Les tubes (pipes) # Cr\u00e9er une chaine de commandes o\u00f9 chaque commande ajout\u00e9e \u00e0 la suite de la chaine vient filter la commande pr\u00e9c\u00e9dente Structure g\u00e9n\u00e9rale cmd1 | cmd2 ( | = \"pipe\") ex : # lit toto, en ressors les lignes contenant \"an\" cat toto | grep \"an\" cat /etc/passwd | cut -d: -f1 | grep 't' | wc -l cut -d: f1 </etc/passwd | grep 't' | wc -l Redirections # : sortir a un moment le STDOUT de la commande d'une chaine de commande vers un fichier (cr\u00e9e) (sortie out par d\u00e9faut), ex: cat /etc/passwd | cut -d: -f1 | grep 't' > lesgens | wc -l < : connecte un fichier (pour le \"in\" de la commande), pour \u00e9viter d'ecrire cat par ex. 1> redirection de out vers le fichier voulu 2> redirection de err vers le fichier voulu ex : grep -r an /etc/passwd/ | grep bus 2>erreur.txt 1>resultat.txt : fait le 1ier grep puis le deuxieme grep, et sors le r\u00e9sultat final => tout ce qui n'est pas reli\u00e9 retourne au \"bash\", et s'affiche donc \u00e0 l'\u00e9cran Fusion de descripteurs (dup) # X>&Y 2>&1 => les erreurs sont envoy\u00e9es sur STDOUT 1>&2 => les messages standard son envoy\u00e9s sur STDERR R\u00e9f\u00e9rences #","title":"Descripteurs de fichiers"},{"location":"010-user/030-tubes-redirections/20-pipes-redirections/#descripteurs-de-fichiers","text":"","title":"Descripteurs de fichiers"},{"location":"010-user/030-tubes-redirections/20-pipes-redirections/#principes-de-fonctionnement","text":"Un processus 3 descripteurs par d\u00e9faut : STDIN, STDOUT,","title":"Principes de fonctionnement"},{"location":"010-user/030-tubes-redirections/20-pipes-redirections/#les-tubes-pipes","text":"Cr\u00e9er une chaine de commandes o\u00f9 chaque commande ajout\u00e9e \u00e0 la suite de la chaine vient filter la commande pr\u00e9c\u00e9dente Structure g\u00e9n\u00e9rale cmd1 | cmd2 ( | = \"pipe\") ex : # lit toto, en ressors les lignes contenant \"an\" cat toto | grep \"an\" cat /etc/passwd | cut -d: -f1 | grep 't' | wc -l cut -d: f1 </etc/passwd | grep 't' | wc -l","title":"Les tubes (pipes)"},{"location":"010-user/030-tubes-redirections/20-pipes-redirections/#redirections","text":": sortir a un moment le STDOUT de la commande d'une chaine de commande vers un fichier (cr\u00e9e) (sortie out par d\u00e9faut), ex: cat /etc/passwd | cut -d: -f1 | grep 't' > lesgens | wc -l < : connecte un fichier (pour le \"in\" de la commande), pour \u00e9viter d'ecrire cat par ex. 1> redirection de out vers le fichier voulu 2> redirection de err vers le fichier voulu ex : grep -r an /etc/passwd/ | grep bus 2>erreur.txt 1>resultat.txt : fait le 1ier grep puis le deuxieme grep, et sors le r\u00e9sultat final => tout ce qui n'est pas reli\u00e9 retourne au \"bash\", et s'affiche donc \u00e0 l'\u00e9cran","title":"Redirections"},{"location":"010-user/030-tubes-redirections/20-pipes-redirections/#fusion-de-descripteurs-dup","text":"X>&Y 2>&1 => les erreurs sont envoy\u00e9es sur STDOUT 1>&2 => les messages standard son envoy\u00e9s sur STDERR","title":"Fusion de descripteurs (dup)"},{"location":"010-user/030-tubes-redirections/20-pipes-redirections/#references","text":"","title":"R\u00e9f\u00e9rences"},{"location":"010-user/030-tubes-redirections/40-rappels-regexp/","text":"Expressions r\u00e9guli\u00e8res # Regular Expressions ( regexp ) en anglais Il existe diff\u00e9rents formats selon la biblioth\u00e8que ou l'outil utilis\u00e9 Type Description POSIX historiques, regex \u00e0 connaitre POSIX + GNU ... POSIX + GNU + EXT ... PERL plus maniables PCRE bien compatible, par exemple en Java, sauf outils historiques PCRE+ extensions de PCRE La logique est la suivante: on \u00e9crit une expression qui est le r\u00e9sum\u00e9 d'un langage, et on l'utilisera pour savoir si une certaine chaine de caracteres est reconnue par ce langage. Exemples /il/ reconnait \"il\", \"filles\", etc. /le/ reconnait \"le\", \"elle\", etc. Base commune, utilis\u00e9 dans grep, sed, perl # Regexp Comportement abcdb cherche \"abcdb\" dans le texte ab. cherche \"ab\" + un caractere quelconque (un . = un caract\u00e8re) [] cherche un caract\u00e8re parmi ceux cit\u00e9s ou dans l'intervale. [^ab] cherche tout sauf a ou b . cherche un caractere quelconque dans le texte Exemples /a./ accepte \"aa\", \"ab\", \"ac\", \"az\", etc. /te[mn]/ accepte soit tem soit ten, /[a-z]/ accepte toute lettre entre a et z /[a-zA-Z0-9/ accepte tous caracteres alphanum\u00e9rique, mais pas les caracteres sp\u00e9ciaux Modificateurs # Regexp Comportement ? le dernier caract\u00e8re (ou groupe) est optionnel. * le dernier caract\u00e8re (ou groupe) peut etre nul ou r\u00e9p\u00e9t\u00e9 + le dernier caractere (ou groupe) existe au moins une fois Exemples /te[mn]?/ accepte \"te\", \"tem\", \"ten\" /truc*/ accepte tru, truc, trucc, truccccc (de 0 \u00e0 une infinit\u00e9 de \"c\") /truc+/ accepte truc, trucc, truccccc (minimum un \"c\") /[a-f]+/ accepte \"aa\", \"af\", \"fa\", \"bb\", \"bac\" ou m\u00eame \"bfbbf\" Ancres # Regexp Comportement ^TRUC recherche la ligne qui commence par TRUC TRUC$ recherche la ligne qui finit par TRUC [\u00e9quivalent \u00e0 ^ mais pour la fin] () groupe de correspondance Exemples ^https?://.*/$ reconnait \"http://\" ou \"https://\" suivi de n'importe quoi mais qui finit avec \"/\" Echappement de caract\u00e8res # Pour rechercher les caract\u00e8res / ou ? ou . sans qu'ils soient int\u00e9rpr\u00e9t\u00e9s eux-m\u00eames en tant que regexp , il est n\u00e9cessaire de les prot\u00e9ger (on parle \"d'\u00e9chappement\"). Pour prot\u00e9ger ces caract\u00e8res : on ajoute un \\ devant. De fa\u00e7on g\u00e9n\u00e9rale on prot\u00e8gera (souvent par \\ ) tout ce qui peut avoir une signification particuli\u00e8re pour dans le contexte (sed, bash, etc. selon ce qu'on est en train de faire). PCRE Etendues # Exemples attribute=([\"']).*\\1 => attribute=\"dfdsfsfdfds\" attribute='gfdfgdgfdgd' R\u00e9f\u00e9rences # OpenClassrooms: Concevez votre site web avec PHP et MySQL / Les expressions r\u00e9guli\u00e8res - Partie 1 et Partie 2","title":"Expressions r\u00e9guli\u00e8res"},{"location":"010-user/030-tubes-redirections/40-rappels-regexp/#expressions-regulieres","text":"Regular Expressions ( regexp ) en anglais Il existe diff\u00e9rents formats selon la biblioth\u00e8que ou l'outil utilis\u00e9 Type Description POSIX historiques, regex \u00e0 connaitre POSIX + GNU ... POSIX + GNU + EXT ... PERL plus maniables PCRE bien compatible, par exemple en Java, sauf outils historiques PCRE+ extensions de PCRE La logique est la suivante: on \u00e9crit une expression qui est le r\u00e9sum\u00e9 d'un langage, et on l'utilisera pour savoir si une certaine chaine de caracteres est reconnue par ce langage. Exemples /il/ reconnait \"il\", \"filles\", etc. /le/ reconnait \"le\", \"elle\", etc.","title":"Expressions r\u00e9guli\u00e8res"},{"location":"010-user/030-tubes-redirections/40-rappels-regexp/#base-commune-utilise-dans-grep-sed-perl","text":"Regexp Comportement abcdb cherche \"abcdb\" dans le texte ab. cherche \"ab\" + un caractere quelconque (un . = un caract\u00e8re) [] cherche un caract\u00e8re parmi ceux cit\u00e9s ou dans l'intervale. [^ab] cherche tout sauf a ou b . cherche un caractere quelconque dans le texte Exemples /a./ accepte \"aa\", \"ab\", \"ac\", \"az\", etc. /te[mn]/ accepte soit tem soit ten, /[a-z]/ accepte toute lettre entre a et z /[a-zA-Z0-9/ accepte tous caracteres alphanum\u00e9rique, mais pas les caracteres sp\u00e9ciaux","title":"Base commune, utilis\u00e9 dans grep, sed, perl"},{"location":"010-user/030-tubes-redirections/40-rappels-regexp/#modificateurs","text":"Regexp Comportement ? le dernier caract\u00e8re (ou groupe) est optionnel. * le dernier caract\u00e8re (ou groupe) peut etre nul ou r\u00e9p\u00e9t\u00e9 + le dernier caractere (ou groupe) existe au moins une fois Exemples /te[mn]?/ accepte \"te\", \"tem\", \"ten\" /truc*/ accepte tru, truc, trucc, truccccc (de 0 \u00e0 une infinit\u00e9 de \"c\") /truc+/ accepte truc, trucc, truccccc (minimum un \"c\") /[a-f]+/ accepte \"aa\", \"af\", \"fa\", \"bb\", \"bac\" ou m\u00eame \"bfbbf\"","title":"Modificateurs"},{"location":"010-user/030-tubes-redirections/40-rappels-regexp/#ancres","text":"Regexp Comportement ^TRUC recherche la ligne qui commence par TRUC TRUC$ recherche la ligne qui finit par TRUC [\u00e9quivalent \u00e0 ^ mais pour la fin] () groupe de correspondance Exemples ^https?://.*/$ reconnait \"http://\" ou \"https://\" suivi de n'importe quoi mais qui finit avec \"/\"","title":"Ancres"},{"location":"010-user/030-tubes-redirections/40-rappels-regexp/#echappement-de-caracteres","text":"Pour rechercher les caract\u00e8res / ou ? ou . sans qu'ils soient int\u00e9rpr\u00e9t\u00e9s eux-m\u00eames en tant que regexp , il est n\u00e9cessaire de les prot\u00e9ger (on parle \"d'\u00e9chappement\"). Pour prot\u00e9ger ces caract\u00e8res : on ajoute un \\ devant. De fa\u00e7on g\u00e9n\u00e9rale on prot\u00e8gera (souvent par \\ ) tout ce qui peut avoir une signification particuli\u00e8re pour dans le contexte (sed, bash, etc. selon ce qu'on est en train de faire).","title":"Echappement de caract\u00e8res"},{"location":"010-user/030-tubes-redirections/40-rappels-regexp/#pcre-etendues","text":"Exemples attribute=([\"']).*\\1 => attribute=\"dfdsfsfdfds\" attribute='gfdfgdgfdgd'","title":"PCRE Etendues"},{"location":"010-user/030-tubes-redirections/40-rappels-regexp/#references","text":"OpenClassrooms: Concevez votre site web avec PHP et MySQL / Les expressions r\u00e9guli\u00e8res - Partie 1 et Partie 2","title":"R\u00e9f\u00e9rences"},{"location":"010-user/030-tubes-redirections/50-grep/","text":"Grep: Attraper une ligne de contenu # Commande grep TRUC ENDROIT (fichier, dossier) Attrape les lignes contenant TRUC dans le fichier, exemple: les lignes qui contiennent \"loutre\" => grep loutre Options -r : r\u00e9cursive : montre les lignes contenant le truc cherch\u00e9 -n : affiche le num\u00e9ro de ligne","title":"Grep: Attraper une ligne de contenu"},{"location":"010-user/030-tubes-redirections/50-grep/#grep-attraper-une-ligne-de-contenu","text":"Commande grep TRUC ENDROIT (fichier, dossier) Attrape les lignes contenant TRUC dans le fichier, exemple: les lignes qui contiennent \"loutre\" => grep loutre Options -r : r\u00e9cursive : montre les lignes contenant le truc cherch\u00e9 -n : affiche le num\u00e9ro de ligne","title":"Grep: Attraper une ligne de contenu"},{"location":"010-user/030-tubes-redirections/60-tr/","text":"Tr: Convertir ou \u00e9liminer des carateres # Convertir Remplace les caracteres (ou intervale) par celui specifi\u00e9 Exemple : $ echo 'tralal\u00e8re' | tr '\u00e9\u00e8' 'ee' tralalere $ echo 'azerty' | tr 'a-z' 'A-Z' AZERTY","title":"Tr: Convertir ou \u00e9liminer des carateres"},{"location":"010-user/030-tubes-redirections/60-tr/#tr-convertir-ou-eliminer-des-carateres","text":"Convertir Remplace les caracteres (ou intervale) par celui specifi\u00e9 Exemple : $ echo 'tralal\u00e8re' | tr '\u00e9\u00e8' 'ee' tralalere $ echo 'azerty' | tr 'a-z' 'A-Z' AZERTY","title":"Tr: Convertir ou \u00e9liminer des carateres"},{"location":"010-user/030-tubes-redirections/70-sed/","text":"Sed: Filtrer et \u00e9diter les flux # Permet de filtrer, de mani\u00e8re plus intelligente que head, grep, etc, avec pas mal d'options Optionns # -e EXPRESSION : evalue l'expression et les commandes donn\u00e9es -n (not) ; masque tout ce qui n'est pas explicitement affich\u00e9e quand l'option est utilis\u00e9e, ne pas oublier d'utiliser la commande p \u00e0 la fin des expresssions pour afficher les r\u00e9sultats Commandes # p : print (affiche ce qu'il y a avant) s : substitue ex : s/:/ / remplace le premier \":\" de chaque ligne par \" \" g : global ex : 's/: /g' remplace tous les \":\" par \" \" Exemples # Afficher la 20eme ligne d'un fichier ('20p' comme 20 print) # sed -n -e '20p' fichier Afficher les lignes 2 \u00e0 8 # sed -n -e '2,8p' fichier Efface tout de la 20eme ligne jusqu'\u00e0 celle qui contient \"vagrant\" # sed -e '20,/vagrant/d' fichier d comme delete /.../ expression r\u00e9guliere pour le mot qu'on cherche '/files\\?/p' affiche file ou bien files. Le s est en option R\u00e9f\u00e9rences # :wip:","title":"Sed: Filtrer et \u00e9diter les flux"},{"location":"010-user/030-tubes-redirections/70-sed/#sed-filtrer-et-editer-les-flux","text":"Permet de filtrer, de mani\u00e8re plus intelligente que head, grep, etc, avec pas mal d'options","title":"Sed: Filtrer et \u00e9diter les flux"},{"location":"010-user/030-tubes-redirections/70-sed/#optionns","text":"-e EXPRESSION : evalue l'expression et les commandes donn\u00e9es -n (not) ; masque tout ce qui n'est pas explicitement affich\u00e9e quand l'option est utilis\u00e9e, ne pas oublier d'utiliser la commande p \u00e0 la fin des expresssions pour afficher les r\u00e9sultats","title":"Optionns"},{"location":"010-user/030-tubes-redirections/70-sed/#commandes","text":"p : print (affiche ce qu'il y a avant) s : substitue ex : s/:/ / remplace le premier \":\" de chaque ligne par \" \" g : global ex : 's/: /g' remplace tous les \":\" par \" \"","title":"Commandes"},{"location":"010-user/030-tubes-redirections/70-sed/#exemples","text":"","title":"Exemples"},{"location":"010-user/030-tubes-redirections/70-sed/#afficher-la-20eme-ligne-dun-fichier-20p-comme-20-print","text":"sed -n -e '20p' fichier","title":"Afficher la 20eme ligne d'un fichier ('20p' comme 20 print)"},{"location":"010-user/030-tubes-redirections/70-sed/#afficher-les-lignes-2-a-8","text":"sed -n -e '2,8p' fichier","title":"Afficher les lignes 2 \u00e0 8"},{"location":"010-user/030-tubes-redirections/70-sed/#efface-tout-de-la-20eme-ligne-jusqua-celle-qui-contient-vagrant","text":"sed -e '20,/vagrant/d' fichier d comme delete /.../ expression r\u00e9guliere pour le mot qu'on cherche '/files\\?/p' affiche file ou bien files. Le s est en option","title":"Efface tout de la 20eme ligne jusqu'\u00e0 celle qui contient \"vagrant\""},{"location":"010-user/030-tubes-redirections/70-sed/#references","text":":wip:","title":"R\u00e9f\u00e9rences"},{"location":"010-user/030-tubes-redirections/80-awk/","text":"Awk: d\u00e9tection et manipulation de motifs # Un des principaux utilitaires de traitement de texte sur GNU/Linux. Tr\u00e8s puissant et utilise un langage de programmation interpret\u00e9 \"simple\". Peut r\u00e9soudre des t\u00e2ches de traitement de texte complexes en quelques lignes de code. Son nom est d\u00e9riv\u00e9 des noms de famille de ses auteurs - Alfred Aho, Peter Weinberger et Brian Kernighan. La version d'AWK que GNU/Linux distribue est \u00e9crite et maintenue par la Free Software Foundation (FSF) ; elle est souvent appel\u00e9e GNU AWK. Variantes de AWK # AWK - Original AWK du laboratoire AT & T. NAWK - Version plus r\u00e9cente et am\u00e9lior\u00e9e de l'AWK du laboratoire AT & T. GAWK - GNU AWK. Il est enti\u00e8rement compatible avec AWK et NAWK. Utilisations typiques de AWK # Traitement de texte, Produire des rapports textuels format\u00e9s, Effectuer des op\u00e9rations arithm\u00e9tiques, Effectuer des op\u00e9rations sur les cordes, et bien d'autres choses encore. References # https://www.tutorialspoint.com/awk/","title":"Awk: d\u00e9tection et manipulation de motifs"},{"location":"010-user/030-tubes-redirections/80-awk/#awk-detection-et-manipulation-de-motifs","text":"Un des principaux utilitaires de traitement de texte sur GNU/Linux. Tr\u00e8s puissant et utilise un langage de programmation interpret\u00e9 \"simple\". Peut r\u00e9soudre des t\u00e2ches de traitement de texte complexes en quelques lignes de code. Son nom est d\u00e9riv\u00e9 des noms de famille de ses auteurs - Alfred Aho, Peter Weinberger et Brian Kernighan. La version d'AWK que GNU/Linux distribue est \u00e9crite et maintenue par la Free Software Foundation (FSF) ; elle est souvent appel\u00e9e GNU AWK.","title":"Awk: d\u00e9tection et manipulation de motifs"},{"location":"010-user/030-tubes-redirections/80-awk/#variantes-de-awk","text":"AWK - Original AWK du laboratoire AT & T. NAWK - Version plus r\u00e9cente et am\u00e9lior\u00e9e de l'AWK du laboratoire AT & T. GAWK - GNU AWK. Il est enti\u00e8rement compatible avec AWK et NAWK.","title":"Variantes de AWK"},{"location":"010-user/030-tubes-redirections/80-awk/#utilisations-typiques-de-awk","text":"Traitement de texte, Produire des rapports textuels format\u00e9s, Effectuer des op\u00e9rations arithm\u00e9tiques, Effectuer des op\u00e9rations sur les cordes, et bien d'autres choses encore.","title":"Utilisations typiques de AWK"},{"location":"010-user/030-tubes-redirections/80-awk/#references","text":"https://www.tutorialspoint.com/awk/","title":"References"},{"location":"010-user/040-droits-permissions/","text":"Droits utilisateurs #","title":"Droits utilisateurs"},{"location":"010-user/040-droits-permissions/#droits-utilisateurs","text":"","title":"Droits utilisateurs"},{"location":"010-user/040-droits-permissions/10-structure-droits/","text":"Permissions # Quelques notions # Des utilisateurs : propri\u00e9taire (user) groupe (group) les autres (other) Des acc\u00e8s : lecture (read, valeur 4) \u00e9criture (write, valeur 2) ex\u00e9cution (exec, valeur 1) aucun (-, valeur 0) Pour chaque utilisateur, il sont exprim\u00e9s sous la forme d'une chaine de 3 caract\u00e8res indiquant les droits qu'il poss\u00e8de Exemple : \u0300 R-- => Read (valeur 4) droit de lire mais pas d'\u00e9crire et d'ex\u00e9cuter RW- => Read + Write (valeur = 6) droit de lire et d'\u00e9crire mais pas d'ex\u00e9cuter RWX => Read + Write + Exec (valeur = 7) --X => Exec (valeur 1) L'ensemble des droits est exprim\u00e9 dans l'ordre suivant : User, Group, Other | U | G | O | -|RW-|R--|R--| le-rapport-urgent.txt Lister les permissions pour les fichiers # $ ls -l *.txt -rw------- 1 batman batteam 0 Mar 28 12:45 fichierPriv\u00e9.txt -rw-rw-r-- 1 batgirl batteam 0 Mar 28 12:47 fichierPublic.txt Changer les permissions : chmod $ chmod g+r fichierPriv\u00e9.txt Changer le propri\u00e9taire : chown $ chown batman:batteam privateBatcaveFile.txt Changer le groupe : chgrp $ chgrp batteam PrivateBatCaveFile.txt","title":"Permissions"},{"location":"010-user/040-droits-permissions/10-structure-droits/#permissions","text":"","title":"Permissions"},{"location":"010-user/040-droits-permissions/10-structure-droits/#quelques-notions","text":"Des utilisateurs : propri\u00e9taire (user) groupe (group) les autres (other) Des acc\u00e8s : lecture (read, valeur 4) \u00e9criture (write, valeur 2) ex\u00e9cution (exec, valeur 1) aucun (-, valeur 0) Pour chaque utilisateur, il sont exprim\u00e9s sous la forme d'une chaine de 3 caract\u00e8res indiquant les droits qu'il poss\u00e8de Exemple : \u0300 R-- => Read (valeur 4) droit de lire mais pas d'\u00e9crire et d'ex\u00e9cuter RW- => Read + Write (valeur = 6) droit de lire et d'\u00e9crire mais pas d'ex\u00e9cuter RWX => Read + Write + Exec (valeur = 7) --X => Exec (valeur 1) L'ensemble des droits est exprim\u00e9 dans l'ordre suivant : User, Group, Other | U | G | O | -|RW-|R--|R--| le-rapport-urgent.txt","title":"Quelques notions"},{"location":"010-user/040-droits-permissions/10-structure-droits/#lister-les-permissions-pour-les-fichiers","text":"$ ls -l *.txt -rw------- 1 batman batteam 0 Mar 28 12:45 fichierPriv\u00e9.txt -rw-rw-r-- 1 batgirl batteam 0 Mar 28 12:47 fichierPublic.txt Changer les permissions : chmod $ chmod g+r fichierPriv\u00e9.txt Changer le propri\u00e9taire : chown $ chown batman:batteam privateBatcaveFile.txt Changer le groupe : chgrp $ chgrp batteam PrivateBatCaveFile.txt","title":"Lister les permissions pour les fichiers"},{"location":"010-user/040-droits-permissions/20-droits-etendus/","text":"Permissions \"avanc\u00e9es\" # [x] Les droits avanc\u00e9es SUID, SGID Sticky Bit","title":"Permissions \"avanc\u00e9es\""},{"location":"010-user/040-droits-permissions/20-droits-etendus/#permissions-avancees","text":"[x] Les droits avanc\u00e9es SUID, SGID Sticky Bit","title":"Permissions \"avanc\u00e9es\""},{"location":"010-user/040-droits-permissions/30-modifications-droits/","text":"Modification des droits # [x] chmod, chown (chgrp), [x] su, (sudo)","title":"Modification des droits"},{"location":"010-user/040-droits-permissions/30-modifications-droits/#modification-des-droits","text":"[x] chmod, chown (chgrp), [x] su, (sudo)","title":"Modification des droits"},{"location":"010-user/080-gestion-processus/","text":"Gestion des processus # ps aux top kill pgrep killall","title":"Gestion des processus"},{"location":"010-user/080-gestion-processus/#gestion-des-processus","text":"ps aux top kill pgrep killall","title":"Gestion des processus"},{"location":"010-user/090-environnement-processus/","text":"L'environnement des processus # notions sur fork / exec env set, unset export read $PWD, $HOME, $USER $PS1, $?, $1..9, $$ (fork / detach\u00e9)","title":"L'environnement des processus"},{"location":"010-user/090-environnement-processus/#lenvironnement-des-processus","text":"notions sur fork / exec env set, unset export read $PWD, $HOME, $USER $PS1, $?, $1..9, $$ (fork / detach\u00e9)","title":"L'environnement des processus"},{"location":"010-user/100-shellscript/","text":"Scripts shell # Foreground / background & umask, Initiation au scripting Boucle FOR While Until Trap","title":"Scripts shell"},{"location":"010-user/100-shellscript/#scripts-shell","text":"Foreground / background & umask, Initiation au scripting Boucle FOR While Until Trap","title":"Scripts shell"},{"location":"010-user/100-shellscript/000-notions-systeme/","text":"Notions systemes # Tout est fichier # Fichiers physiques # Tables des fichiers # Descripteurs # Processus #","title":"Notions systemes"},{"location":"010-user/100-shellscript/000-notions-systeme/#notions-systemes","text":"","title":"Notions systemes"},{"location":"010-user/100-shellscript/000-notions-systeme/#tout-est-fichier","text":"","title":"Tout est fichier"},{"location":"010-user/100-shellscript/000-notions-systeme/#fichiers-physiques","text":"","title":"Fichiers physiques"},{"location":"010-user/100-shellscript/000-notions-systeme/#tables-des-fichiers","text":"","title":"Tables des fichiers"},{"location":"010-user/100-shellscript/000-notions-systeme/#descripteurs","text":"","title":"Descripteurs"},{"location":"010-user/100-shellscript/000-notions-systeme/#processus","text":"","title":"Processus"},{"location":"010-user/100-shellscript/010-shebang/","text":"Shebang # 1 #!/chemin/vers/l-interpreteur","title":"Shebang"},{"location":"010-user/100-shellscript/010-shebang/#shebang","text":"1 #!/chemin/vers/l-interpreteur","title":"Shebang"},{"location":"010-user/100-shellscript/020-code-retour/","text":"Codes de retour # Codes de retours && || ;","title":"Codes de retour"},{"location":"010-user/100-shellscript/020-code-retour/#codes-de-retour","text":"Codes de retours && || ;","title":"Codes de retour"},{"location":"010-user/100-shellscript/025-variables/","text":"Variables # Environnement # Utilisation # Assignation # Assignation conditionnelle #","title":"Variables"},{"location":"010-user/100-shellscript/025-variables/#variables","text":"","title":"Variables"},{"location":"010-user/100-shellscript/025-variables/#environnement","text":"","title":"Environnement"},{"location":"010-user/100-shellscript/025-variables/#utilisation","text":"","title":"Utilisation"},{"location":"010-user/100-shellscript/025-variables/#assignation","text":"","title":"Assignation"},{"location":"010-user/100-shellscript/025-variables/#assignation-conditionnelle","text":"","title":"Assignation conditionnelle"},{"location":"010-user/100-shellscript/030-test-conditionnels/","text":"Tests conditionnels # Commande test # if ... ; then ... ; fi # case ... in ... ; esac #","title":"Tests conditionnels"},{"location":"010-user/100-shellscript/030-test-conditionnels/#tests-conditionnels","text":"","title":"Tests conditionnels"},{"location":"010-user/100-shellscript/030-test-conditionnels/#commande-test","text":"","title":"Commande test"},{"location":"010-user/100-shellscript/030-test-conditionnels/#if-then-fi","text":"","title":"if ... ; then ... ; fi"},{"location":"010-user/100-shellscript/030-test-conditionnels/#case-in-esac","text":"","title":"case ... in ... ; esac"},{"location":"010-user/100-shellscript/040-boucles/","text":"Boucles #","title":"Boucles"},{"location":"010-user/100-shellscript/040-boucles/#boucles","text":"","title":"Boucles"},{"location":"010-user/100-shellscript/050-descripteurs/","text":"Manipulation des descripteurs # Rappels sur les pipe, les redirections # Cr\u00e9ation de descripteur # Fermeture de descripteurs # /dev/fd/xx # R\u00e9f\u00e9rences # https://abs.traduc.org/abs-fr/ch20.html https://fr.wikipedia.org/wiki/Descripteur_de_fichier https://ubuntuplace.info/questions/338806/in-bash-what-is-file-descriptor-255-for-can-i-use-it","title":"Manipulation des descripteurs"},{"location":"010-user/100-shellscript/050-descripteurs/#manipulation-des-descripteurs","text":"","title":"Manipulation des descripteurs"},{"location":"010-user/100-shellscript/050-descripteurs/#rappels-sur-les-pipe-les-redirections","text":"","title":"Rappels sur les pipe, les redirections"},{"location":"010-user/100-shellscript/050-descripteurs/#creation-de-descripteur","text":"","title":"Cr\u00e9ation de descripteur"},{"location":"010-user/100-shellscript/050-descripteurs/#fermeture-de-descripteurs","text":"","title":"Fermeture de descripteurs"},{"location":"010-user/100-shellscript/050-descripteurs/#devfdxx","text":"","title":"/dev/fd/xx"},{"location":"010-user/100-shellscript/050-descripteurs/#references","text":"https://abs.traduc.org/abs-fr/ch20.html https://fr.wikipedia.org/wiki/Descripteur_de_fichier https://ubuntuplace.info/questions/338806/in-bash-what-is-file-descriptor-255-for-can-i-use-it","title":"R\u00e9f\u00e9rences"},{"location":"010-user/110-archivage/","text":"Archivage #","title":"Archivage"},{"location":"010-user/110-archivage/#archivage","text":"","title":"Archivage"},{"location":"010-user/110-archivage/010-intro/","text":"Archivage # ar - archivage de fichiers (tr\u00e8s ancien, rare) cpio - archivage de fichiers (ancien mais encore utilis\u00e9) tar - archivage de fichiers rsync - synchronisation de fichiers dd - copie de disques partimage copies de disques","title":"Archivage"},{"location":"010-user/110-archivage/010-intro/#archivage","text":"ar - archivage de fichiers (tr\u00e8s ancien, rare) cpio - archivage de fichiers (ancien mais encore utilis\u00e9) tar - archivage de fichiers rsync - synchronisation de fichiers dd - copie de disques partimage copies de disques","title":"Archivage"},{"location":"010-user/110-archivage/020-archive-cpio/","text":"Archiver (cpio) # Vue d'ensemble # Obsolete depuis l'existance de tar Format des packages .rpm Cr\u00e9er une archive # -o : cr\u00e9er une archive -F : nom de l'archive (sinon STDIN/STDOUT) -H FORMAT : ou FORMAT est le format \u00e0 utiliser -i : restaurer l'archive $ find documents | cpio -o -H tar -F archives-batcave.tar Lister une archive # -F : nom de l'archive (sinon STDIN/STDOUT) -i : restaurer l'archive -t\u0300 : afficher la table $ cpio -it -F perl-files.tar Restaurer une archive # -F : nom de l'archive (sinon STDIN/STDOUT) -i : restaurer l'archive $ cpio -i -F archives-batcave.tar","title":"Archiver (cpio)"},{"location":"010-user/110-archivage/020-archive-cpio/#archiver-cpio","text":"","title":"Archiver (cpio)"},{"location":"010-user/110-archivage/020-archive-cpio/#vue-densemble","text":"Obsolete depuis l'existance de tar Format des packages .rpm","title":"Vue d'ensemble"},{"location":"010-user/110-archivage/020-archive-cpio/#creer-une-archive","text":"-o : cr\u00e9er une archive -F : nom de l'archive (sinon STDIN/STDOUT) -H FORMAT : ou FORMAT est le format \u00e0 utiliser -i : restaurer l'archive $ find documents | cpio -o -H tar -F archives-batcave.tar","title":"Cr\u00e9er une archive"},{"location":"010-user/110-archivage/020-archive-cpio/#lister-une-archive","text":"-F : nom de l'archive (sinon STDIN/STDOUT) -i : restaurer l'archive -t\u0300 : afficher la table $ cpio -it -F perl-files.tar","title":"Lister une archive"},{"location":"010-user/110-archivage/020-archive-cpio/#restaurer-une-archive","text":"-F : nom de l'archive (sinon STDIN/STDOUT) -i : restaurer l'archive $ cpio -i -F archives-batcave.tar","title":"Restaurer une archive"},{"location":"010-user/110-archivage/030-archive-tar/","text":"Archiver (tar) # Vue d'ensemble # Archive sans compression N\u00e9cessite des outils tiers pour compresser: gzip , bzip2 , 7z ... Ces outils tiers peuvent \u00eatre appel\u00e9s directement avec certains param\u00e8tres Ex : -z (gzip), -j (bzip2), -a (d\u00e9tection automatique du format) Cr\u00e9er une archive # Au format tar (sans compression): # $ tar cvf archives-batcave.tar /home/batman/documents $ gzip archives-batcave.tar Au format tar.gz (compress\u00e9e avec Gzip) # Soit en deux \u00e9tapes : $ tar cvf archives-batcave.tar /home/batman/documents $ gzip archives-batcave.tar Soit en une seule commande : $ tar czvf archives-batcave.tar.gz /home/batman/documents Lister le contenu d'une archive # Au format tar (sans compression): # $ tar tvf archives-batcave.tar Au format tar.gz (compress\u00e9e avec Gzip) # Soit en deux \u00e9tapes : $ gunzip archives-batcave.tar.gz $ tar tvf archives-batcave.tar Soit en une seule commande : $ tar tavf archives-batcave.tar.gz Extraire les fichiers d'une archive # Au format tar (sans compression): # $ tar xvf archives-batcave.tar Au format tar.gz (compress\u00e9e avec Gzip) # Soit en deux \u00e9tapes : $ gunzip archives-batcave.tar.gz $ tar xvf archives-batcave.tar Soit en une seule commande : $ tar xavf archives-batcave.tar.gz Trucs et astuces avec tar # Copie de locale de filesystems # Comme tar conserve les types de fichiers et les permissions, il peut aussi servir \u00e0 copier des disques : $ ( cd /anciendisque && tar cf - . ) | \\ ( cd /nouveaudisque && tar xvf - ) Copie de filesystems entre deux machines # Cette copie de filesystem peut aussi fonctionner \u00e0 travers SSH. Soit dans un sens (en poussant les donn\u00e9es vers un serveur distant) : $ ( cd /anciendisque && tar cf - . ) | \\ ssh user@serveur \"cd /nouveaudisque && tar xvf -\" Soit dans l'autre sens (en tirant les donn\u00e9es depuis un serveur distant) : $ ssh \"cd /anciendisque && tar cf - .\" | \\ ( cd /nouveaudisque && tar xvf - )","title":"Archiver (tar)"},{"location":"010-user/110-archivage/030-archive-tar/#archiver-tar","text":"","title":"Archiver (tar)"},{"location":"010-user/110-archivage/030-archive-tar/#vue-densemble","text":"Archive sans compression N\u00e9cessite des outils tiers pour compresser: gzip , bzip2 , 7z ... Ces outils tiers peuvent \u00eatre appel\u00e9s directement avec certains param\u00e8tres Ex : -z (gzip), -j (bzip2), -a (d\u00e9tection automatique du format)","title":"Vue d'ensemble"},{"location":"010-user/110-archivage/030-archive-tar/#creer-une-archive","text":"","title":"Cr\u00e9er une archive"},{"location":"010-user/110-archivage/030-archive-tar/#au-format-tar-sans-compression","text":"$ tar cvf archives-batcave.tar /home/batman/documents $ gzip archives-batcave.tar","title":"Au format tar (sans compression):"},{"location":"010-user/110-archivage/030-archive-tar/#au-format-targz-compressee-avec-gzip","text":"Soit en deux \u00e9tapes : $ tar cvf archives-batcave.tar /home/batman/documents $ gzip archives-batcave.tar Soit en une seule commande : $ tar czvf archives-batcave.tar.gz /home/batman/documents","title":"Au format tar.gz (compress\u00e9e avec Gzip)"},{"location":"010-user/110-archivage/030-archive-tar/#lister-le-contenu-dune-archive","text":"","title":"Lister le contenu d'une archive"},{"location":"010-user/110-archivage/030-archive-tar/#au-format-tar-sans-compression_1","text":"$ tar tvf archives-batcave.tar","title":"Au format tar (sans compression):"},{"location":"010-user/110-archivage/030-archive-tar/#au-format-targz-compressee-avec-gzip_1","text":"Soit en deux \u00e9tapes : $ gunzip archives-batcave.tar.gz $ tar tvf archives-batcave.tar Soit en une seule commande : $ tar tavf archives-batcave.tar.gz","title":"Au format tar.gz (compress\u00e9e avec Gzip)"},{"location":"010-user/110-archivage/030-archive-tar/#extraire-les-fichiers-dune-archive","text":"","title":"Extraire les fichiers d'une archive"},{"location":"010-user/110-archivage/030-archive-tar/#au-format-tar-sans-compression_2","text":"$ tar xvf archives-batcave.tar","title":"Au format tar (sans compression):"},{"location":"010-user/110-archivage/030-archive-tar/#au-format-targz-compressee-avec-gzip_2","text":"Soit en deux \u00e9tapes : $ gunzip archives-batcave.tar.gz $ tar xvf archives-batcave.tar Soit en une seule commande : $ tar xavf archives-batcave.tar.gz","title":"Au format tar.gz (compress\u00e9e avec Gzip)"},{"location":"010-user/110-archivage/030-archive-tar/#trucs-et-astuces-avec-tar","text":"","title":"Trucs et astuces avec tar"},{"location":"010-user/110-archivage/030-archive-tar/#copie-de-locale-de-filesystems","text":"Comme tar conserve les types de fichiers et les permissions, il peut aussi servir \u00e0 copier des disques : $ ( cd /anciendisque && tar cf - . ) | \\ ( cd /nouveaudisque && tar xvf - )","title":"Copie de locale de filesystems"},{"location":"010-user/110-archivage/030-archive-tar/#copie-de-filesystems-entre-deux-machines","text":"Cette copie de filesystem peut aussi fonctionner \u00e0 travers SSH. Soit dans un sens (en poussant les donn\u00e9es vers un serveur distant) : $ ( cd /anciendisque && tar cf - . ) | \\ ssh user@serveur \"cd /nouveaudisque && tar xvf -\" Soit dans l'autre sens (en tirant les donn\u00e9es depuis un serveur distant) : $ ssh \"cd /anciendisque && tar cf - .\" | \\ ( cd /nouveaudisque && tar xvf - )","title":"Copie de filesystems entre deux machines"},{"location":"010-user/110-archivage/035-rsync/","text":"Synchronisation de fichiers avec rsync # Vue d'ensemble # Synchronise deux r\u00e9pertoires Synchronisation locale ou distante Disponible pour toutes plate-formes S\u00e9curis\u00e9 via SSH Les options # -a : archive -v : verbose -z : compression Exemple # rsync -e ssh \\ -avz \\ batman@batcave.batdomain:/home/batman/ \\ /home/bruce/backups/batman/","title":"Synchronisation de fichiers avec rsync"},{"location":"010-user/110-archivage/035-rsync/#synchronisation-de-fichiers-avec-rsync","text":"","title":"Synchronisation de fichiers avec rsync"},{"location":"010-user/110-archivage/035-rsync/#vue-densemble","text":"Synchronise deux r\u00e9pertoires Synchronisation locale ou distante Disponible pour toutes plate-formes S\u00e9curis\u00e9 via SSH","title":"Vue d'ensemble"},{"location":"010-user/110-archivage/035-rsync/#les-options","text":"-a : archive -v : verbose -z : compression","title":"Les options"},{"location":"010-user/110-archivage/035-rsync/#exemple","text":"rsync -e ssh \\ -avz \\ batman@batcave.batdomain:/home/batman/ \\ /home/bruce/backups/batman/","title":"Exemple"},{"location":"010-user/110-archivage/040-split/","text":"D\u00e9couper des fichiers #","title":"D\u00e9couper des fichiers"},{"location":"010-user/110-archivage/040-split/#decouper-des-fichiers","text":"","title":"D\u00e9couper des fichiers"},{"location":"010-user/110-archivage/050-integrity/","text":"Int\u00e9grit\u00e9 (FIXME) # Focus sur Rsync (Optimisation/Parall\u00e8le) Focus sur v\u00e9rif de l'int\u00e9grit\u00e9 des donn\u00e9es md5sum sha1sum par2 - error correction gpg (sign) raid V\u00e9rification de non-corruption/non-falsification des donn\u00e9es d'un filesystem aide (advanced intrusion detection environment) tiger","title":"Int\u00e9grit\u00e9 (FIXME)"},{"location":"010-user/110-archivage/050-integrity/#integrite-fixme","text":"Focus sur Rsync (Optimisation/Parall\u00e8le) Focus sur v\u00e9rif de l'int\u00e9grit\u00e9 des donn\u00e9es md5sum sha1sum par2 - error correction gpg (sign) raid V\u00e9rification de non-corruption/non-falsification des donn\u00e9es d'un filesystem aide (advanced intrusion detection environment) tiger","title":"Int\u00e9grit\u00e9 (FIXME)"},{"location":"010-user/zzz-miscellanous/","text":"Utilitaires sympa / utiles # git (les 4 commandes base) screen / tmux","title":"Utilitaires sympa / utiles"},{"location":"010-user/zzz-miscellanous/#utilitaires-sympa-utiles","text":"git (les 4 commandes base) screen / tmux","title":"Utilitaires sympa / utiles"},{"location":"020-admin/010-disks/","text":"Disques #","title":"Disques"},{"location":"020-admin/010-disks/#disques","text":"","title":"Disques"},{"location":"020-admin/010-disks/010-mbr-partitions/","text":"MBR et partitions # Master Boot Record # Offset 0 Taille 512 octets Routine d'amorcage Table des partitions 4 partitions primares https://fr.wikipedia.org/wiki/Master_boot_record GUID Partition Table (GPT) # Offset 1 Taille 32 * 512 octets Table des partitions Protective MBR Redondance en fin de disque https://fr.wikipedia.org/wiki/GUID_Partition_Table Partitions # Les partitions primares Les partitions \u00e9tendues (logiques) https://fr.wikipedia.org/wiki/Partition_(informatique) Lecture des partitions # Les infos, vues depuis linux cat /proc/partitions Creation des partitions # Avec fdisk fdisk /dev/sdX Avec cfdisk cfdisk /dev/sdX Voir aussi gparted sfdisk /dev # /dev/hd x Y - disques PATA /dev/sd x Y - disques SATA /dev/sg Y - disques SCSI /dev/sr Y - cdrom SCSI /dev/scd Y - cdrom SCSI udev # Des alias ! Plus de clart\u00e9 ! /dev/dvd Y - lecteurs DVD ..","title":"MBR et partitions"},{"location":"020-admin/010-disks/010-mbr-partitions/#mbr-et-partitions","text":"","title":"MBR et partitions"},{"location":"020-admin/010-disks/010-mbr-partitions/#master-boot-record","text":"Offset 0 Taille 512 octets Routine d'amorcage Table des partitions 4 partitions primares https://fr.wikipedia.org/wiki/Master_boot_record","title":"Master Boot Record"},{"location":"020-admin/010-disks/010-mbr-partitions/#guid-partition-table-gpt","text":"Offset 1 Taille 32 * 512 octets Table des partitions Protective MBR Redondance en fin de disque https://fr.wikipedia.org/wiki/GUID_Partition_Table","title":"GUID Partition Table (GPT)"},{"location":"020-admin/010-disks/010-mbr-partitions/#partitions","text":"Les partitions primares Les partitions \u00e9tendues (logiques) https://fr.wikipedia.org/wiki/Partition_(informatique)","title":"Partitions"},{"location":"020-admin/010-disks/010-mbr-partitions/#lecture-des-partitions","text":"Les infos, vues depuis linux cat /proc/partitions","title":"Lecture des partitions"},{"location":"020-admin/010-disks/010-mbr-partitions/#creation-des-partitions","text":"Avec fdisk fdisk /dev/sdX Avec cfdisk cfdisk /dev/sdX Voir aussi gparted sfdisk","title":"Creation des partitions"},{"location":"020-admin/010-disks/010-mbr-partitions/#dev","text":"/dev/hd x Y - disques PATA /dev/sd x Y - disques SATA /dev/sg Y - disques SCSI /dev/sr Y - cdrom SCSI /dev/scd Y - cdrom SCSI","title":"/dev"},{"location":"020-admin/010-disks/010-mbr-partitions/#udev","text":"Des alias ! Plus de clart\u00e9 ! /dev/dvd Y - lecteurs DVD ..","title":"udev"},{"location":"020-admin/020-filesystem/","text":"Syst\u00e8mes de fichiers # Notion de point de montage Partitionnement ( mkfs.* ) Formatage Montage et d\u00e9montage Utilitaires disque : df, du, dd, losetup free","title":"Syst\u00e8mes de fichiers"},{"location":"020-admin/020-filesystem/#systemes-de-fichiers","text":"Notion de point de montage Partitionnement ( mkfs.* ) Formatage Montage et d\u00e9montage Utilitaires disque : df, du, dd, losetup free","title":"Syst\u00e8mes de fichiers"},{"location":"020-admin/020-filesystem/010-fs-types/","text":"Types de syst\u00e8mes de fichier # Ext2 / Ext3 / Ext4 # Ext2 = format historique Ext3 = Ext2 + journalisation Ext4 = Ext3 + ... size: total : 1 exabyte storage individual : 16TB directories: 64k subdirectories better, performance : multiblock allocation, delayed allocation better error correction: journal checksum, fast fsck no-journaling Autres formats # ReiserFS XFS Btrfs ecriture plus rapide que ext4 lecture plus lente que ext4 Filesystems virtuels Rappels # Blocks Inodes Fichiers et r\u00e9pertoires Formatage d'une partition # Avec mkfs.FILESYSTEM mkfs. _fsname_ _partition_ avec LABEL le nom du disque (ex: DISQUE_SUPERGENIAL ) X le nom du p\u00e9riph\u00e9rique (ex: a,b,c), et Y le num\u00e9ro de la partition Exemple mkfs.ext4 -m 8 -L LABEL /dev/sdXY Controle d'int\u00e9grit\u00e9 # fsck. fsname partition - v\u00e9rification du filesystem Labels # e2label partition - affiche le label e2label -L label partition - affiche le label R\u00e9f\u00e9rences # https://fr.wikipedia.org/wiki/N%C5%93ud_d%27index http://jfenal.free.fr/Traduc/FSHOWTO/filesystems-howto.fr-7.html https://web.archive.org/web/20120302034319/http://linuxologist.com/1general/ext4-filesystem-explained-in-plain-english/ https://en.wikipedia.org/wiki/ReiserFS https://geekz.co.uk/lovesraymond/archive/so-i-married-a-kernel-programmer","title":"Types de syst\u00e8mes de fichier"},{"location":"020-admin/020-filesystem/010-fs-types/#types-de-systemes-de-fichier","text":"","title":"Types de syst\u00e8mes de fichier"},{"location":"020-admin/020-filesystem/010-fs-types/#ext2-ext3-ext4","text":"Ext2 = format historique Ext3 = Ext2 + journalisation Ext4 = Ext3 + ... size: total : 1 exabyte storage individual : 16TB directories: 64k subdirectories better, performance : multiblock allocation, delayed allocation better error correction: journal checksum, fast fsck no-journaling","title":"Ext2 / Ext3 / Ext4"},{"location":"020-admin/020-filesystem/010-fs-types/#autres-formats","text":"ReiserFS XFS Btrfs ecriture plus rapide que ext4 lecture plus lente que ext4 Filesystems virtuels","title":"Autres formats"},{"location":"020-admin/020-filesystem/010-fs-types/#rappels","text":"Blocks Inodes Fichiers et r\u00e9pertoires","title":"Rappels"},{"location":"020-admin/020-filesystem/010-fs-types/#formatage-dune-partition","text":"Avec mkfs.FILESYSTEM mkfs. _fsname_ _partition_ avec LABEL le nom du disque (ex: DISQUE_SUPERGENIAL ) X le nom du p\u00e9riph\u00e9rique (ex: a,b,c), et Y le num\u00e9ro de la partition Exemple mkfs.ext4 -m 8 -L LABEL /dev/sdXY","title":"Formatage d'une partition"},{"location":"020-admin/020-filesystem/010-fs-types/#controle-dintegrite","text":"fsck. fsname partition - v\u00e9rification du filesystem","title":"Controle d'int\u00e9grit\u00e9"},{"location":"020-admin/020-filesystem/010-fs-types/#labels","text":"e2label partition - affiche le label e2label -L label partition - affiche le label","title":"Labels"},{"location":"020-admin/020-filesystem/010-fs-types/#references","text":"https://fr.wikipedia.org/wiki/N%C5%93ud_d%27index http://jfenal.free.fr/Traduc/FSHOWTO/filesystems-howto.fr-7.html https://web.archive.org/web/20120302034319/http://linuxologist.com/1general/ext4-filesystem-explained-in-plain-english/ https://en.wikipedia.org/wiki/ReiserFS https://geekz.co.uk/lovesraymond/archive/so-i-married-a-kernel-programmer","title":"R\u00e9f\u00e9rences"},{"location":"020-admin/020-filesystem/015-swap/","text":"Swap # D\u00e9finition # Swap-per, c'est \u00e9changer un contenu de la m\u00e9moire centrale vers le contenu d'une m\u00e9moire secondaire, ou r\u00e9ciproquement. Plusieurs types de swap # Sur partition Sur fichiers Manipuler le swap # /proc/swaps $ cat /proc/swaps Filename Type Size Used Priority /dev/sda1 partition 15624188 518960 -1 mkswap partition - formater une partition commee swap swapon partition - activer une partition comme swap swapoff partition - d\u00e9sactiver une partition du swap","title":"Swap"},{"location":"020-admin/020-filesystem/015-swap/#swap","text":"","title":"Swap"},{"location":"020-admin/020-filesystem/015-swap/#definition","text":"Swap-per, c'est \u00e9changer un contenu de la m\u00e9moire centrale vers le contenu d'une m\u00e9moire secondaire, ou r\u00e9ciproquement.","title":"D\u00e9finition"},{"location":"020-admin/020-filesystem/015-swap/#plusieurs-types-de-swap","text":"Sur partition Sur fichiers","title":"Plusieurs types de swap"},{"location":"020-admin/020-filesystem/015-swap/#manipuler-le-swap","text":"/proc/swaps $ cat /proc/swaps Filename Type Size Used Priority /dev/sda1 partition 15624188 518960 -1 mkswap partition - formater une partition commee swap swapon partition - activer une partition comme swap swapoff partition - d\u00e9sactiver une partition du swap","title":"Manipuler le swap"},{"location":"020-admin/020-filesystem/020-fs-structure/","text":"Structure de l'arborescence # Linux/Unix classique => Filesystem Herarchy Standard # / => racine (parent de tout) /boot => le n\u00e9cessaire pour le d\u00e9marrage (config MBR + noyau + initrd) /etc => configuration du systeme `- XXX* => la configuration pour le service XXX (/lost+found) => objets trouv\u00e9s (fsck = filesystem check) /sbin => binaire systeme (super/system binaries => root only) /bin => binaires \"moins importants\" (outils, services, ..) /lib => bibliotheques systeme (libc, drivers, firmware...) /tmp => fichiers temporaires (supprim\u00e9s au prochain d\u00e9marrage) /mnt => point d'ancrage (ex: /dev/fd0 => /mnt/floppy, /dev/cdrom0 => /mnt/cdrom ) |- disque1 `- disque2 /usr => ressources systeme / ressources utilisateur |- bin |- sbin |- lib |- share | `- doc ( `- home => dossier utilisateurs historiques < 1980 ) /home => dossier des utilisateurs |- team1 | |- alice | `- bob |- alice `- bob /root => dossier de l'admin /var => les donn\u00e9es variables (des services) |- spool => file d'attente `- lib => infos sp\u00e9cifiques au service (non file d'attente) Unix/Linux <20 ans # /proc => VFS : infos sur le kernel (processus, certains p\u00e9riph\u00e9riques, stack ipv4/ipv6, etc.) /dev => VFS : infos statiques sur les p\u00e9riph\u00e9riques (AVANT mknod) /opt => |- logiciel1 => les logiciels non-officiels (hors-distribution donc) `- logiciel2 => ... Linux <10 ans # /dev => VFS : infos dynamiques sur les p\u00e9riph\u00e9riques (PUIS devfs / APRES udev) /sys => VFS : infos sur le fonctionnement de TOUS les p\u00e9riph\u00e9tiques /run \u207c> VFS : partition en m\u00e9moire (contient tmp, des containers pour les users, etc.) /lib64 => comme lib, mais en 64bits (x86 est compatible entre x86_64 et x86_32) /media => comme mnt, mais dynamique (/media/USER/PERIPHERIQUE ) /srv => infos li\u00e9s aux services h\u00e9berg\u00e9s Linux tr\u00e8s r\u00e9cents (<2 ans) # /bin -> /usr/bin /lib -> /usr/lib /sbin -> /usr/sbin Sp\u00e9cifique \u00e0 Linux # /vmlinuz => lien vers le noyau /initrd.img => lien vers le initrd (drivers dynamiques) /vmlinuz.old => lien vers l'ancien noyau /initrd.img.old => lien vers l'ancien initrd (drivers dynamiques) # pas standard /vagrant => sp\u00e9cifique \u00e0 vagrant (synchro de votre dossier du bureau dans la VM) R\u00e9f\u00e9rences # https://fr.wikipedia.org/wiki/Filesystem_Hierarchy_Standard","title":"Structure de l'arborescence"},{"location":"020-admin/020-filesystem/020-fs-structure/#structure-de-larborescence","text":"","title":"Structure de l'arborescence"},{"location":"020-admin/020-filesystem/020-fs-structure/#linuxunix-classique-filesystem-herarchy-standard","text":"/ => racine (parent de tout) /boot => le n\u00e9cessaire pour le d\u00e9marrage (config MBR + noyau + initrd) /etc => configuration du systeme `- XXX* => la configuration pour le service XXX (/lost+found) => objets trouv\u00e9s (fsck = filesystem check) /sbin => binaire systeme (super/system binaries => root only) /bin => binaires \"moins importants\" (outils, services, ..) /lib => bibliotheques systeme (libc, drivers, firmware...) /tmp => fichiers temporaires (supprim\u00e9s au prochain d\u00e9marrage) /mnt => point d'ancrage (ex: /dev/fd0 => /mnt/floppy, /dev/cdrom0 => /mnt/cdrom ) |- disque1 `- disque2 /usr => ressources systeme / ressources utilisateur |- bin |- sbin |- lib |- share | `- doc ( `- home => dossier utilisateurs historiques < 1980 ) /home => dossier des utilisateurs |- team1 | |- alice | `- bob |- alice `- bob /root => dossier de l'admin /var => les donn\u00e9es variables (des services) |- spool => file d'attente `- lib => infos sp\u00e9cifiques au service (non file d'attente)","title":"Linux/Unix classique =&gt; Filesystem Herarchy Standard"},{"location":"020-admin/020-filesystem/020-fs-structure/#unixlinux-20-ans","text":"/proc => VFS : infos sur le kernel (processus, certains p\u00e9riph\u00e9riques, stack ipv4/ipv6, etc.) /dev => VFS : infos statiques sur les p\u00e9riph\u00e9riques (AVANT mknod) /opt => |- logiciel1 => les logiciels non-officiels (hors-distribution donc) `- logiciel2 => ...","title":"Unix/Linux &lt;20 ans"},{"location":"020-admin/020-filesystem/020-fs-structure/#linux-10-ans","text":"/dev => VFS : infos dynamiques sur les p\u00e9riph\u00e9riques (PUIS devfs / APRES udev) /sys => VFS : infos sur le fonctionnement de TOUS les p\u00e9riph\u00e9tiques /run \u207c> VFS : partition en m\u00e9moire (contient tmp, des containers pour les users, etc.) /lib64 => comme lib, mais en 64bits (x86 est compatible entre x86_64 et x86_32) /media => comme mnt, mais dynamique (/media/USER/PERIPHERIQUE ) /srv => infos li\u00e9s aux services h\u00e9berg\u00e9s","title":"Linux &lt;10 ans"},{"location":"020-admin/020-filesystem/020-fs-structure/#linux-tres-recents-2-ans","text":"/bin -> /usr/bin /lib -> /usr/lib /sbin -> /usr/sbin","title":"Linux tr\u00e8s r\u00e9cents (&lt;2 ans)"},{"location":"020-admin/020-filesystem/020-fs-structure/#specifique-a-linux","text":"/vmlinuz => lien vers le noyau /initrd.img => lien vers le initrd (drivers dynamiques) /vmlinuz.old => lien vers l'ancien noyau /initrd.img.old => lien vers l'ancien initrd (drivers dynamiques) # pas standard /vagrant => sp\u00e9cifique \u00e0 vagrant (synchro de votre dossier du bureau dans la VM)","title":"Sp\u00e9cifique \u00e0 Linux"},{"location":"020-admin/020-filesystem/020-fs-structure/#references","text":"https://fr.wikipedia.org/wiki/Filesystem_Hierarchy_Standard","title":"R\u00e9f\u00e9rences"},{"location":"020-admin/020-filesystem/030-mount/","text":"Mount # Attache un objet du VFS \u00e0 un chemin mount -t TYPE DEVICE MOUNTPOUNT Exemples # mount -t ext4 /dev/sdb1 /mnt/extra1 mount -t ext4 -oro /dev/sdb1 /mnt/extra1 mount -obind /home/user /mnt/clone-of-user FIN JOUR 1 mount -t iso9660 /dev/loop0 /mnt/iso loopback devices Montage automatique # Le fichier /etc/fstab Voir aussi # automount pmount udev R\u00e9f\u00e9rences #","title":"Mount"},{"location":"020-admin/020-filesystem/030-mount/#mount","text":"Attache un objet du VFS \u00e0 un chemin mount -t TYPE DEVICE MOUNTPOUNT","title":"Mount"},{"location":"020-admin/020-filesystem/030-mount/#exemples","text":"mount -t ext4 /dev/sdb1 /mnt/extra1 mount -t ext4 -oro /dev/sdb1 /mnt/extra1 mount -obind /home/user /mnt/clone-of-user FIN JOUR 1 mount -t iso9660 /dev/loop0 /mnt/iso loopback devices","title":"Exemples"},{"location":"020-admin/020-filesystem/030-mount/#montage-automatique","text":"Le fichier /etc/fstab","title":"Montage automatique"},{"location":"020-admin/020-filesystem/030-mount/#voir-aussi","text":"automount pmount udev","title":"Voir aussi"},{"location":"020-admin/020-filesystem/030-mount/#references","text":"","title":"R\u00e9f\u00e9rences"},{"location":"020-admin/030-disques-virtuels/","text":"Gestion avanc\u00e9e des disques # Swap Fuse RAID (LVM)","title":"Gestion avanc\u00e9e des disques"},{"location":"020-admin/030-disques-virtuels/#gestion-avancee-des-disques","text":"Swap Fuse RAID (LVM)","title":"Gestion avanc\u00e9e des disques"},{"location":"020-admin/030-disques-virtuels/010-vfs/","text":"Filesystems Virtuels # /dev /proc /sys /cgroups ...","title":"Filesystems Virtuels"},{"location":"020-admin/030-disques-virtuels/010-vfs/#filesystems-virtuels","text":"/dev /proc /sys /cgroups ...","title":"Filesystems Virtuels"},{"location":"020-admin/030-disques-virtuels/020-loopback/","text":"P\u00e9riph\u00e9riques loopback # Cr\u00e9er un p\u00e9riph\u00e9rique de type block depuis un fichier # losetup -f /chemin/vers/fichier Lister les fichiers & p\u00e9riph\u00e9riques # losetup -l Supprimer le p\u00e9riph\u00e9rique # losetup -d /dev/loop0 dd if=/dev/zero of=/opt/demo.dsk bs=1M count=3000 losetup -f /opt/demo.dsk cfdisk /dev/loop0 losetup --partscan -f /opt/demo.dsk Extra tip : monter directement une partition depuis une image # losetup /dev/loop1 --offset $((2048 * 512)) /opt/demo.dsk blkid /dev/sda1 /dev/sda1: UUID=\"77e3f255-2ef2-47bc-ad89-7cdbd65f5fbc\" TYPE=\"ext4\" mount /dev/loop1 /mnt/p1/ R\u00e9f\u00e9rences # dd_rescue => dd mais plus malin ;)","title":"P\u00e9riph\u00e9riques loopback"},{"location":"020-admin/030-disques-virtuels/020-loopback/#peripheriques-loopback","text":"Cr\u00e9er un p\u00e9riph\u00e9rique de type block depuis un fichier # losetup -f /chemin/vers/fichier Lister les fichiers & p\u00e9riph\u00e9riques # losetup -l Supprimer le p\u00e9riph\u00e9rique # losetup -d /dev/loop0 dd if=/dev/zero of=/opt/demo.dsk bs=1M count=3000 losetup -f /opt/demo.dsk cfdisk /dev/loop0 losetup --partscan -f /opt/demo.dsk","title":"P\u00e9riph\u00e9riques loopback"},{"location":"020-admin/030-disques-virtuels/020-loopback/#extra-tip-monter-directement-une-partition-depuis-une-image","text":"losetup /dev/loop1 --offset $((2048 * 512)) /opt/demo.dsk blkid /dev/sda1 /dev/sda1: UUID=\"77e3f255-2ef2-47bc-ad89-7cdbd65f5fbc\" TYPE=\"ext4\" mount /dev/loop1 /mnt/p1/","title":"Extra tip : monter directement une partition depuis une image"},{"location":"020-admin/030-disques-virtuels/020-loopback/#references","text":"dd_rescue => dd mais plus malin ;)","title":"R\u00e9f\u00e9rences"},{"location":"020-admin/030-disques-virtuels/030-lvm/","text":"Logical Volume Manager # Une abstraction du stockage # Sur 3 niveaux PV Physical Volume Volumes physiques (~ partitions) VG Volume Group Groupes de PV (~ disque virtuel) LV Logical Volume Volumes logiques (~ partitions virtuelles sur VG) Gestion des PV # pvcreate PARTITION cr\u00e9er un PV pvmove PARTITION-SOURCE PARTITION-DESTINATION d\u00e9place les donn\u00e9es d'un PV Gestion des VG # vgcreate vgname pvname cr\u00e9er un VG vgextend vgname pvname changer la taille d'un VG vgreduce vgname pvname retirer un PV du VG vgremove vgname supprimer le VG (et les donn\u00e9es qui vont avec!) Gestion des LV # lvcreate -L taille -n lvname vgname cr\u00e9e un LV sur le VG lvremove lvname supprime le LV Retrouver ses PV, VG, etc. # pvscan rechercher des PV pvmove d\u00e9placer les donn\u00e9es entre PV pvdisplay afficher les disques contenant des PV vgscan rechercher des VG vgdisplay afficher la liste des VG et leur caract\u00e9ristiques FIXME: cr\u00e9ation d'un PV # cf TP FIXME: cr\u00e9ation d'un VG # cf TP FIXME: propri\u00e9t\u00e9s des VG # (r\u00e9plication, etc.) Exemple : cr\u00e9ation d'un LV # # lvcreate -L 1024M -n example-lv # mkfs -t ext3 /dev/example-vg/example-lv # mount /dev/example-vg/example-lv /mnt/example-lv # df -h Exemple : Extension d'un LV # # lvextend -L+1024M /dev/example-vg/example-lv # resize2fs /dev/example-vg/example-lv N.B: Penser \u00e0 d\u00e9monter le LV avant R\u00e9f\u00e9rences # Debian-Facile: LVM Tutoriels Linux Debian - LVM 2 HP/UX LVM configuration https://linoxide.com/linux-how-to/lvm-configuration-linux/ https://www.it-connect.fr/chapitres/creation-et-gestion-dune-structure-lvm/","title":"Logical Volume Manager"},{"location":"020-admin/030-disques-virtuels/030-lvm/#logical-volume-manager","text":"","title":"Logical Volume Manager"},{"location":"020-admin/030-disques-virtuels/030-lvm/#une-abstraction-du-stockage","text":"Sur 3 niveaux PV Physical Volume Volumes physiques (~ partitions) VG Volume Group Groupes de PV (~ disque virtuel) LV Logical Volume Volumes logiques (~ partitions virtuelles sur VG)","title":"Une abstraction du stockage"},{"location":"020-admin/030-disques-virtuels/030-lvm/#gestion-des-pv","text":"pvcreate PARTITION cr\u00e9er un PV pvmove PARTITION-SOURCE PARTITION-DESTINATION d\u00e9place les donn\u00e9es d'un PV","title":"Gestion des PV"},{"location":"020-admin/030-disques-virtuels/030-lvm/#gestion-des-vg","text":"vgcreate vgname pvname cr\u00e9er un VG vgextend vgname pvname changer la taille d'un VG vgreduce vgname pvname retirer un PV du VG vgremove vgname supprimer le VG (et les donn\u00e9es qui vont avec!)","title":"Gestion des VG"},{"location":"020-admin/030-disques-virtuels/030-lvm/#gestion-des-lv","text":"lvcreate -L taille -n lvname vgname cr\u00e9e un LV sur le VG lvremove lvname supprime le LV","title":"Gestion des LV"},{"location":"020-admin/030-disques-virtuels/030-lvm/#retrouver-ses-pv-vg-etc","text":"pvscan rechercher des PV pvmove d\u00e9placer les donn\u00e9es entre PV pvdisplay afficher les disques contenant des PV vgscan rechercher des VG vgdisplay afficher la liste des VG et leur caract\u00e9ristiques","title":"Retrouver ses PV, VG, etc."},{"location":"020-admin/030-disques-virtuels/030-lvm/#fixme-creation-dun-pv","text":"cf TP","title":"FIXME: cr\u00e9ation d'un PV"},{"location":"020-admin/030-disques-virtuels/030-lvm/#fixme-creation-dun-vg","text":"cf TP","title":"FIXME: cr\u00e9ation d'un VG"},{"location":"020-admin/030-disques-virtuels/030-lvm/#fixme-proprietes-des-vg","text":"(r\u00e9plication, etc.)","title":"FIXME: propri\u00e9t\u00e9s des VG"},{"location":"020-admin/030-disques-virtuels/030-lvm/#exemple-creation-dun-lv","text":"# lvcreate -L 1024M -n example-lv # mkfs -t ext3 /dev/example-vg/example-lv # mount /dev/example-vg/example-lv /mnt/example-lv # df -h","title":"Exemple : cr\u00e9ation d'un LV"},{"location":"020-admin/030-disques-virtuels/030-lvm/#exemple-extension-dun-lv","text":"# lvextend -L+1024M /dev/example-vg/example-lv # resize2fs /dev/example-vg/example-lv N.B: Penser \u00e0 d\u00e9monter le LV avant","title":"Exemple : Extension d'un LV"},{"location":"020-admin/030-disques-virtuels/030-lvm/#references","text":"Debian-Facile: LVM Tutoriels Linux Debian - LVM 2 HP/UX LVM configuration https://linoxide.com/linux-how-to/lvm-configuration-linux/ https://www.it-connect.fr/chapitres/creation-et-gestion-dune-structure-lvm/","title":"R\u00e9f\u00e9rences"},{"location":"020-admin/030-disques-virtuels/040-raid/","text":"RAID # Rappel du concept # D\u00e9finition # Techniques permettant de r\u00e9partir des donn\u00e9es sur plusieurs disques durs afin d'am\u00e9liorer soit la tol\u00e9rance aux pannes, soit la s\u00e9curit\u00e9, soit les performances de l'ensemble, ou une r\u00e9partition de tout cela. Levels # RAID 0 - ''striping'' RAID 1 - ''mirroir'' RAID 5 et de nombreux autres... Utiliser mdadm # Pr\u00e9requis # Penser \u00e0 installer mdadm # apt-get install mdadm Always RTFM # Relire la documentation, parce que vous aussi oublierez comment l'utiliser. Et ce sera au moment le plus critique... :-) man mdadm Cr\u00e9ation # mdadm --create [...] Exemple : # mdadm --create /dev/md1 --level=1 \\ --raid-devices=2 \\ /dev/sdb1 /dev/sdc1 (R\u00e9)Assemblage # Pour un RAID existant mdadm --assemble [...] # mdadm --assemble /dev/md1 /dev/sdb1 /dev/sdc1 (Re)Construction # Pour r\u00e9parer un RAID cass\u00e9 mdadm --manage [...] # mdadm --manage /dev/md1 --remove /dev/sdb1 # mdadm --manage /dev/md1 --add /dev/sdb1 Le fichier mdadm.conf # Permet \u00e0 mdadm de retrouver et reconstruire les RAID au d\u00e9marrage du syst\u00e8me. Utiliser mdadm --examine --scan pour d\u00e9tecter lister les RAID sur les disques pr\u00e9sents. Le format est le m\u00eame que mdadm.conf et permet de compl\u00e9ter facilement le fichier. $ mdadm --detail --scan >> /etc/mdadm.conf Monitoring # Une fois le RAID cr\u00e9\u00e9 et assembler, au moins en th\u00e9orie, il est int\u00e9ressant d'aller voir s'il fonctionne correctement. Pour cela, il suffit de lire le fichier /proc/mdstat $ cat /proc/mdstat R\u00e9f\u00e9rences # * Noisette Wiki - Mdadm","title":"RAID"},{"location":"020-admin/030-disques-virtuels/040-raid/#raid","text":"","title":"RAID"},{"location":"020-admin/030-disques-virtuels/040-raid/#rappel-du-concept","text":"","title":"Rappel du concept"},{"location":"020-admin/030-disques-virtuels/040-raid/#definition","text":"Techniques permettant de r\u00e9partir des donn\u00e9es sur plusieurs disques durs afin d'am\u00e9liorer soit la tol\u00e9rance aux pannes, soit la s\u00e9curit\u00e9, soit les performances de l'ensemble, ou une r\u00e9partition de tout cela.","title":"D\u00e9finition"},{"location":"020-admin/030-disques-virtuels/040-raid/#levels","text":"RAID 0 - ''striping'' RAID 1 - ''mirroir'' RAID 5 et de nombreux autres...","title":"Levels"},{"location":"020-admin/030-disques-virtuels/040-raid/#utiliser-mdadm","text":"","title":"Utiliser mdadm"},{"location":"020-admin/030-disques-virtuels/040-raid/#prerequis","text":"Penser \u00e0 installer mdadm # apt-get install mdadm","title":"Pr\u00e9requis"},{"location":"020-admin/030-disques-virtuels/040-raid/#always-rtfm","text":"Relire la documentation, parce que vous aussi oublierez comment l'utiliser. Et ce sera au moment le plus critique... :-) man mdadm","title":"Always RTFM"},{"location":"020-admin/030-disques-virtuels/040-raid/#creation","text":"mdadm --create [...] Exemple : # mdadm --create /dev/md1 --level=1 \\ --raid-devices=2 \\ /dev/sdb1 /dev/sdc1","title":"Cr\u00e9ation"},{"location":"020-admin/030-disques-virtuels/040-raid/#reassemblage","text":"Pour un RAID existant mdadm --assemble [...] # mdadm --assemble /dev/md1 /dev/sdb1 /dev/sdc1","title":"(R\u00e9)Assemblage"},{"location":"020-admin/030-disques-virtuels/040-raid/#reconstruction","text":"Pour r\u00e9parer un RAID cass\u00e9 mdadm --manage [...] # mdadm --manage /dev/md1 --remove /dev/sdb1 # mdadm --manage /dev/md1 --add /dev/sdb1","title":"(Re)Construction"},{"location":"020-admin/030-disques-virtuels/040-raid/#le-fichier-mdadmconf","text":"Permet \u00e0 mdadm de retrouver et reconstruire les RAID au d\u00e9marrage du syst\u00e8me. Utiliser mdadm --examine --scan pour d\u00e9tecter lister les RAID sur les disques pr\u00e9sents. Le format est le m\u00eame que mdadm.conf et permet de compl\u00e9ter facilement le fichier. $ mdadm --detail --scan >> /etc/mdadm.conf","title":"Le fichier mdadm.conf"},{"location":"020-admin/030-disques-virtuels/040-raid/#monitoring","text":"Une fois le RAID cr\u00e9\u00e9 et assembler, au moins en th\u00e9orie, il est int\u00e9ressant d'aller voir s'il fonctionne correctement. Pour cela, il suffit de lire le fichier /proc/mdstat $ cat /proc/mdstat","title":"Monitoring"},{"location":"020-admin/030-disques-virtuels/040-raid/#references","text":"* Noisette Wiki - Mdadm","title":"R\u00e9f\u00e9rences"},{"location":"020-admin/030-disques-virtuels/050-device-mapper/","text":"Device mapper # device mappers (p\u00e9riph\u00e9rique) https://www.bucchino.org/blog/linux-les-devices-mappers/ https://www.saout.de/misc/dm-crypt/ https://www.kernel.org/doc/Documentation/device-mapper/cache.txt fuse-like pour DM / drdb","title":"Device mapper"},{"location":"020-admin/030-disques-virtuels/050-device-mapper/#device-mapper","text":"device mappers (p\u00e9riph\u00e9rique) https://www.bucchino.org/blog/linux-les-devices-mappers/ https://www.saout.de/misc/dm-crypt/ https://www.kernel.org/doc/Documentation/device-mapper/cache.txt fuse-like pour DM / drdb","title":"Device mapper"},{"location":"020-admin/030-disques-virtuels/090-fuse/","text":"Filesystem in UserSpace # La commande fusermount Exemples curlfs sshfs gcsfuse fusesmb","title":"Filesystem in UserSpace"},{"location":"020-admin/030-disques-virtuels/090-fuse/#filesystem-in-userspace","text":"La commande fusermount Exemples curlfs sshfs gcsfuse fusesmb","title":"Filesystem in UserSpace"},{"location":"020-admin/040-disk-tools/040-dd-util/","text":"Copie de disque avec dd # dd : copie et conversion # * if : source (input file) * of : destination (output file) * bs : taille des blocks (block side) * count : nombre de blocks dd if = /foo of = /bar bs = 1M count = 1000 Ne r\u00e9siste pas aux erreurs de lecture/\u00e9criture sur le disque Une alternative : dd_rescue","title":"Copie de disque avec dd"},{"location":"020-admin/040-disk-tools/040-dd-util/#copie-de-disque-avec-dd","text":"","title":"Copie de disque avec dd"},{"location":"020-admin/040-disk-tools/040-dd-util/#dd-copie-et-conversion","text":"* if : source (input file) * of : destination (output file) * bs : taille des blocks (block side) * count : nombre de blocks dd if = /foo of = /bar bs = 1M count = 1000 Ne r\u00e9siste pas aux erreurs de lecture/\u00e9criture sur le disque Une alternative : dd_rescue","title":"dd : copie et conversion"},{"location":"020-admin/040-disk-tools/040-partimage/","text":"Partimage # Outil complet d'archivage et restauration de disques (voir la doc...)","title":"Partimage"},{"location":"020-admin/040-disk-tools/040-partimage/#partimage","text":"Outil complet d'archivage et restauration de disques (voir la doc...)","title":"Partimage"},{"location":"020-admin/050-reseaux/","text":"Outils pour le r\u00e9seau # [ ] configuration du r\u00e9seau (ifconfig, ip, iwconfig, etc.) [ ] visualisation du r\u00e9seau (tcpdump, netstat, lsof)","title":"Outils pour le r\u00e9seau"},{"location":"020-admin/050-reseaux/#outils-pour-le-reseau","text":"[ ] configuration du r\u00e9seau (ifconfig, ip, iwconfig, etc.) [ ] visualisation du r\u00e9seau (tcpdump, netstat, lsof)","title":"Outils pour le r\u00e9seau"},{"location":"020-admin/060-installation-logiciels/","text":"Installation de logiciels # Compilation depuis les source # Gestionnaire de paquets # Gestionnaire avanc\u00e9e des paquets # [ ] apt / [ ] dpkg [ ] apt pinning","title":"Installation de logiciels"},{"location":"020-admin/060-installation-logiciels/#installation-de-logiciels","text":"","title":"Installation de logiciels"},{"location":"020-admin/060-installation-logiciels/#compilation-depuis-les-source","text":"","title":"Compilation depuis les source"},{"location":"020-admin/060-installation-logiciels/#gestionnaire-de-paquets","text":"","title":"Gestionnaire de paquets"},{"location":"020-admin/060-installation-logiciels/#gestionnaire-avancee-des-paquets","text":"[ ] apt / [ ] dpkg [ ] apt pinning","title":"Gestionnaire avanc\u00e9e des paquets"},{"location":"020-admin/070-system-startup/","text":"D\u00e9marrage # D\u00e9marrage d'un ordinateur (hardware) Les modes de d\u00e9marrage du syst\u00e8me Les modes multi-utilisateurs Les modes d'arr\u00eat Le mode de maintenance (single) init, shutdown (init 0), halt (init 0), reboot (init 6)","title":"D\u00e9marrage"},{"location":"020-admin/070-system-startup/#demarrage","text":"D\u00e9marrage d'un ordinateur (hardware) Les modes de d\u00e9marrage du syst\u00e8me Les modes multi-utilisateurs Les modes d'arr\u00eat Le mode de maintenance (single) init, shutdown (init 0), halt (init 0), reboot (init 6)","title":"D\u00e9marrage"},{"location":"020-admin/070-system-startup/010-hardware/","text":"","title":"010 hardware"},{"location":"020-admin/070-system-startup/020-bootloader/","text":"S\u00e9quence d'amorcage d'un PC # electronique (CPU) chercher la premiere instruction depuis un support (ex: flash) adresse pr\u00e9d\u00e9finie executer le programme initialiser le mat\u00e9riel (niveau \u00e9lectrique/m\u00e9moire) BIOS/UEFI idem l'\u00e9tage du dessus bootloader (logiciel(s) - attention au chainloading : GRUB, LILO, Win..., ) initialiser le mat\u00e9riel (mettre les p\u00e9riph\u00e9riques dans un certain \u00e9tat, flash, disque) chercher/charger un noyau de SE depuis une m\u00e9moire (flash, disque, etc.) vers la RAM execute noyau initialiser le mat\u00e9riel (mettre les p\u00e9riph\u00e9riques dans un certain \u00e9tat => grand niveau de d\u00e9tail) drivers sp\u00e9cifques \u00e0 l'ensemble du mat\u00e9riel pr\u00e9parer le n\u00e9cessaire \u00e0 la gestion des IO (scheduling) pr\u00e9parer le n\u00e9cessaire \u00e0 la gestion des processus (scheduling) charger le premier programme -> /sbin/init init g\u00e9rer/communiquer avec ses fils (les autres processus) a travers des signaux communiquer avec le noyau d\u00e9marrer les programmes/scripts n\u00e9cessaires au d\u00e9marrage g\u00e9rer les diff\u00e9rents niveaux de d\u00e9marrage (runlevel / target) * rcX.d","title":"S\u00e9quence d'amorcage d'un PC"},{"location":"020-admin/070-system-startup/020-bootloader/#sequence-damorcage-dun-pc","text":"electronique (CPU) chercher la premiere instruction depuis un support (ex: flash) adresse pr\u00e9d\u00e9finie executer le programme initialiser le mat\u00e9riel (niveau \u00e9lectrique/m\u00e9moire) BIOS/UEFI idem l'\u00e9tage du dessus bootloader (logiciel(s) - attention au chainloading : GRUB, LILO, Win..., ) initialiser le mat\u00e9riel (mettre les p\u00e9riph\u00e9riques dans un certain \u00e9tat, flash, disque) chercher/charger un noyau de SE depuis une m\u00e9moire (flash, disque, etc.) vers la RAM execute noyau initialiser le mat\u00e9riel (mettre les p\u00e9riph\u00e9riques dans un certain \u00e9tat => grand niveau de d\u00e9tail) drivers sp\u00e9cifques \u00e0 l'ensemble du mat\u00e9riel pr\u00e9parer le n\u00e9cessaire \u00e0 la gestion des IO (scheduling) pr\u00e9parer le n\u00e9cessaire \u00e0 la gestion des processus (scheduling) charger le premier programme -> /sbin/init init g\u00e9rer/communiquer avec ses fils (les autres processus) a travers des signaux communiquer avec le noyau d\u00e9marrer les programmes/scripts n\u00e9cessaires au d\u00e9marrage g\u00e9rer les diff\u00e9rents niveaux de d\u00e9marrage (runlevel / target) * rcX.d","title":"S\u00e9quence d'amorcage d'un PC"},{"location":"020-admin/070-system-startup/030-services/","text":"S\u00e9quence de d\u00e9marrage # init # runlevels 0 => eteint 1 => single (admin solo) . => ??? 3 => multi-service + r\u00e9seau . => ??? 5 => multi-service + r\u00e9seau + interface graphique 6 => reboot inittab rc","title":"S\u00e9quence de d\u00e9marrage"},{"location":"020-admin/070-system-startup/030-services/#sequence-de-demarrage","text":"","title":"S\u00e9quence de d\u00e9marrage"},{"location":"020-admin/070-system-startup/030-services/#init","text":"runlevels 0 => eteint 1 => single (admin solo) . => ??? 3 => multi-service + r\u00e9seau . => ??? 5 => multi-service + r\u00e9seau + interface graphique 6 => reboot inittab rc","title":"init"},{"location":"020-admin/080-kernel/","text":"Noyau Linux # Installation d'un kernel (depuis les sources) Ajout de drivers Param\u00e9trage dynamique des drivers (sysctl et /etc/sysctl.conf)","title":"Noyau Linux"},{"location":"020-admin/080-kernel/#noyau-linux","text":"Installation d'un kernel (depuis les sources) Ajout de drivers Param\u00e9trage dynamique des drivers (sysctl et /etc/sysctl.conf)","title":"Noyau Linux"},{"location":"020-admin/080-kernel/010-build-from-sources/","text":"A partir des sources # https://www.kernel.org/ make config # make oldconfig #","title":"A partir des sources"},{"location":"020-admin/080-kernel/010-build-from-sources/#a-partir-des-sources","text":"https://www.kernel.org/","title":"A partir des sources"},{"location":"020-admin/080-kernel/010-build-from-sources/#make-config","text":"","title":"make config"},{"location":"020-admin/080-kernel/010-build-from-sources/#make-oldconfig","text":"","title":"make oldconfig"},{"location":"020-admin/080-kernel/dynamic-settings/","text":"","title":"Dynamic settings"},{"location":"020-admin/080-kernel/modules/","text":"Modules # Lister les modules # # lsmod Ins\u00e9rer un module (sans gestion de d\u00e9pendances) # Les modules sont dans /lib/modules/<numero-du-kernel>/kernel/<arborescence-du-kernel>/<module>.ko Sans gestion de d\u00e9pendances # insmod /path/complet [options] Avec gestion de d\u00e9pendances # modprobe nom [options] Supprimer un module # Sans gestion de d\u00e9pendances # rmmod nom La m\u00eame chose, avec gestion de d\u00e9pendances # modprobe -r nom Obtenir des informations sur les modules # modinfo nom","title":"Modules"},{"location":"020-admin/080-kernel/modules/#modules","text":"","title":"Modules"},{"location":"020-admin/080-kernel/modules/#lister-les-modules","text":"# lsmod","title":"Lister les modules"},{"location":"020-admin/080-kernel/modules/#inserer-un-module-sans-gestion-de-dependances","text":"Les modules sont dans /lib/modules/<numero-du-kernel>/kernel/<arborescence-du-kernel>/<module>.ko Sans gestion de d\u00e9pendances # insmod /path/complet [options] Avec gestion de d\u00e9pendances # modprobe nom [options]","title":"Ins\u00e9rer un module (sans gestion de d\u00e9pendances)"},{"location":"020-admin/080-kernel/modules/#supprimer-un-module","text":"Sans gestion de d\u00e9pendances # rmmod nom La m\u00eame chose, avec gestion de d\u00e9pendances # modprobe -r nom Obtenir des informations sur les modules # modinfo nom","title":"Supprimer un module"},{"location":"020-admin/090-isolation/","text":"Techniques d'isolation de sous-systemes # LD_PRELOAD (demo avec malloc, fakeroot, fakechroot, etc.) Chroot (avec debootstra) Intro \u00e0 LXC (lxc-create...) Rapide intro \u00e0 Docker (docker run, Dockerfile, docker-compose)","title":"Techniques d'isolation de sous-systemes"},{"location":"020-admin/090-isolation/#techniques-disolation-de-sous-systemes","text":"LD_PRELOAD (demo avec malloc, fakeroot, fakechroot, etc.) Chroot (avec debootstra) Intro \u00e0 LXC (lxc-create...) Rapide intro \u00e0 Docker (docker run, Dockerfile, docker-compose)","title":"Techniques d'isolation de sous-systemes"},{"location":"020-admin/090-isolation/systemd-slices/","text":"Isolateurs et performances # Optimisation des performances / Isolateurs nice ionice sysctl cgexec cpulimit systemd + slices https://www.freedesktop.org/software/systemd/man/systemd.resource-control.html https://www.scylladb.com/2019/09/25/isolating-workloads-with-systemd-slices/ Isolating workloads with Systemd slicesScyllaDB's Glauber Costa explores cgroups and systemd, and how these can be used to define slices which can be used to protect database performance.www.scylladb.com\u200b[16:15] Glenn ROLLAND cg* => cgroups en direct cgconfigparser => cfconfig.conf Systemd + Slice => cgroups en plus simple","title":"Isolateurs et performances"},{"location":"020-admin/090-isolation/systemd-slices/#isolateurs-et-performances","text":"Optimisation des performances / Isolateurs nice ionice sysctl cgexec cpulimit systemd + slices https://www.freedesktop.org/software/systemd/man/systemd.resource-control.html https://www.scylladb.com/2019/09/25/isolating-workloads-with-systemd-slices/ Isolating workloads with Systemd slicesScyllaDB's Glauber Costa explores cgroups and systemd, and how these can be used to define slices which can be used to protect database performance.www.scylladb.com\u200b[16:15] Glenn ROLLAND cg* => cgroups en direct cgconfigparser => cfconfig.conf Systemd + Slice => cgroups en plus simple","title":"Isolateurs et performances"},{"location":"020-admin/100-services/","text":"Services courants #","title":"Services courants"},{"location":"020-admin/100-services/#services-courants","text":"","title":"Services courants"},{"location":"020-admin/100-services/010-http-apache/","text":"Serveur HTTP (Apache) # Vue d'ensemble # Concept # Ports TCP : 80 (HTTP) et 443 (HTTPS) Protocole HTTP Client -> Requ\u00eate -> Serveur -> R\u00e9ponse -> Client Logiciels # * Apache2 * Nginx * LigHTTPd * Cherokee * tHTTPd * ... Apache2 # * Historique * Plusieurs versions (prefox, worker, itk, event) * Relativement complexe Lighttpd # * Extr\u00e8mement rapide * Tr\u00e8s l\u00e9ger Nginx # * Depuis 2007 * Extr\u00e8mement rapide * Tr\u00e8s l\u00e9ger * Excellente mont\u00e9e en charge Principe g\u00e9n\u00e9ral # \u00c9quivalence # URL racine (ex: http://example.com ) dossier racine (ex: /var/www/example ) http://example.com/foo/bar.html -> /var/www/example/foo/bar.html Protocole HTTP # * GET url lit un contenu * HEAD url lit la description du contenu * DELETE url efface un contenu * POST url envoie un contenu * PUT url envoie un contenu * UPDATE url met-\u00e0-jour un contenu Configuration # Param\u00e8tres globaux * /etc/apache2/apache2.conf * /etc/apache2/ports.conf Pour recharger : /etc/init.d/apache2 [stop|start|restart] Modules # Petite liste... # actions alias asis auth_basic auth_digest authn_alias authn_anon authn_dbd authn_dbm authn_default authn_file authnz_ldap authz_dbm authz_default authz_groupfile authz_host authz_owner authz_svn authz_user autoindex cache cern_meta cgi cgid charset_lite dav dav_fs dav_lock dav_svn dbd deflate dir disk_cache dump_io env expires ext_filter fcgid file_cache filter headers ident imagemap include info ldap log_forensic mem_cache mime mime_magic musicindex negotiation passenger perl php5 php5_cgi proxy proxy_ajp proxy_balancer proxy_connect proxy_ftp proxy_http proxy_scgi python reqtimeout rewrite setenvif speling ssl status substitute suexec unique_id userdir usertrack vhost_alias Utilisation des modules # a2enmod et a2dismod VirtualHosts # Exemple # /etc/apache2/sites-available/example.net <VirtualHost *:80> ServerAdmin webmaster@example.net ServerName example.net ServerAlias www.example.net DocumentRoot /var/www/example.net/public_html/ ErrorLog /var/www/example.net/logs/error.log CustomLog /var/www/example.net/logs/access.log combined </VirtualHost> Utilisation # a2ensite et a2dissite Contenus dynamiques # Fonctionnement # * via un module sp\u00e9cifique ( process spawning ) * par d\u00e9l\u00e9gation (ex: reverse proxy vers php-cgi , php-fpm , node.js , rails etc.) PHP - Exemple # apt-get install libapache2-mod-php5 \\ php5-gd php5-mcrypt php-pear PHP - Configuration # /etc/php5/apache2/php.ini * display_errors * log_errors * file_uploads * upload_max_filesize * max_execution_time PHP - Test # Cr\u00e9er un fichier test.php ... <?php phpinfo(); ?> ... et essayer d'y acc\u00e9der R\u00e9f\u00e9rences #","title":"Serveur HTTP (Apache)"},{"location":"020-admin/100-services/010-http-apache/#serveur-http-apache","text":"","title":"Serveur HTTP (Apache)"},{"location":"020-admin/100-services/010-http-apache/#vue-densemble","text":"","title":"Vue d'ensemble"},{"location":"020-admin/100-services/010-http-apache/#concept","text":"Ports TCP : 80 (HTTP) et 443 (HTTPS) Protocole HTTP Client -> Requ\u00eate -> Serveur -> R\u00e9ponse -> Client","title":"Concept"},{"location":"020-admin/100-services/010-http-apache/#logiciels","text":"* Apache2 * Nginx * LigHTTPd * Cherokee * tHTTPd * ...","title":"Logiciels"},{"location":"020-admin/100-services/010-http-apache/#apache2","text":"* Historique * Plusieurs versions (prefox, worker, itk, event) * Relativement complexe","title":"Apache2"},{"location":"020-admin/100-services/010-http-apache/#lighttpd","text":"* Extr\u00e8mement rapide * Tr\u00e8s l\u00e9ger","title":"Lighttpd"},{"location":"020-admin/100-services/010-http-apache/#nginx","text":"* Depuis 2007 * Extr\u00e8mement rapide * Tr\u00e8s l\u00e9ger * Excellente mont\u00e9e en charge","title":"Nginx"},{"location":"020-admin/100-services/010-http-apache/#principe-general","text":"","title":"Principe g\u00e9n\u00e9ral"},{"location":"020-admin/100-services/010-http-apache/#equivalence","text":"URL racine (ex: http://example.com ) dossier racine (ex: /var/www/example ) http://example.com/foo/bar.html -> /var/www/example/foo/bar.html","title":"\u00c9quivalence"},{"location":"020-admin/100-services/010-http-apache/#protocole-http","text":"* GET url lit un contenu * HEAD url lit la description du contenu * DELETE url efface un contenu * POST url envoie un contenu * PUT url envoie un contenu * UPDATE url met-\u00e0-jour un contenu","title":"Protocole HTTP"},{"location":"020-admin/100-services/010-http-apache/#configuration","text":"Param\u00e8tres globaux * /etc/apache2/apache2.conf * /etc/apache2/ports.conf Pour recharger : /etc/init.d/apache2 [stop|start|restart]","title":"Configuration"},{"location":"020-admin/100-services/010-http-apache/#modules","text":"","title":"Modules"},{"location":"020-admin/100-services/010-http-apache/#petite-liste","text":"actions alias asis auth_basic auth_digest authn_alias authn_anon authn_dbd authn_dbm authn_default authn_file authnz_ldap authz_dbm authz_default authz_groupfile authz_host authz_owner authz_svn authz_user autoindex cache cern_meta cgi cgid charset_lite dav dav_fs dav_lock dav_svn dbd deflate dir disk_cache dump_io env expires ext_filter fcgid file_cache filter headers ident imagemap include info ldap log_forensic mem_cache mime mime_magic musicindex negotiation passenger perl php5 php5_cgi proxy proxy_ajp proxy_balancer proxy_connect proxy_ftp proxy_http proxy_scgi python reqtimeout rewrite setenvif speling ssl status substitute suexec unique_id userdir usertrack vhost_alias","title":"Petite liste..."},{"location":"020-admin/100-services/010-http-apache/#utilisation-des-modules","text":"a2enmod et a2dismod","title":"Utilisation des modules"},{"location":"020-admin/100-services/010-http-apache/#virtualhosts","text":"","title":"VirtualHosts"},{"location":"020-admin/100-services/010-http-apache/#exemple","text":"/etc/apache2/sites-available/example.net <VirtualHost *:80> ServerAdmin webmaster@example.net ServerName example.net ServerAlias www.example.net DocumentRoot /var/www/example.net/public_html/ ErrorLog /var/www/example.net/logs/error.log CustomLog /var/www/example.net/logs/access.log combined </VirtualHost>","title":"Exemple"},{"location":"020-admin/100-services/010-http-apache/#utilisation","text":"a2ensite et a2dissite","title":"Utilisation"},{"location":"020-admin/100-services/010-http-apache/#contenus-dynamiques","text":"","title":"Contenus dynamiques"},{"location":"020-admin/100-services/010-http-apache/#fonctionnement","text":"* via un module sp\u00e9cifique ( process spawning ) * par d\u00e9l\u00e9gation (ex: reverse proxy vers php-cgi , php-fpm , node.js , rails etc.)","title":"Fonctionnement"},{"location":"020-admin/100-services/010-http-apache/#php-exemple","text":"apt-get install libapache2-mod-php5 \\ php5-gd php5-mcrypt php-pear","title":"PHP - Exemple"},{"location":"020-admin/100-services/010-http-apache/#php-configuration","text":"/etc/php5/apache2/php.ini * display_errors * log_errors * file_uploads * upload_max_filesize * max_execution_time","title":"PHP - Configuration"},{"location":"020-admin/100-services/010-http-apache/#php-test","text":"Cr\u00e9er un fichier test.php ... <?php phpinfo(); ?> ... et essayer d'y acc\u00e9der","title":"PHP - Test"},{"location":"020-admin/100-services/010-http-apache/#references","text":"","title":"R\u00e9f\u00e9rences"},{"location":"020-admin/100-services/020-http-nginx/","text":"Serveur HTTP (Nginx) (TODO) #","title":"Serveur HTTP (Nginx) (TODO)"},{"location":"020-admin/100-services/020-http-nginx/#serveur-http-nginx-todo","text":"","title":"Serveur HTTP (Nginx) (TODO)"},{"location":"020-admin/100-services/030-dhcp-server/","text":"Serveur DHCP # Concept # Modes # * dynamic allocation * automatic allocation * static allocation Verbes # 1. DHCPDISCOVER localisation des serveurs 2. DHCPOFFER r\u00e9ponse du serveur 3. DHCPREQUEST requete du client (ex: prolongation du bail) 4. DHCPACK r\u00e9ponse du serveur (ex: parametres, IP client) 5. DHCPNAK r\u00e9ponse du serveur (ex: bail \u00e9chu, mauvaise configuration) 6. DHCPDECLINE r\u00e9ponse du client (ex: addresse d\u00e9j\u00e0 utilis\u00e9e) 7. DHCPRELEASE le client libere son IP 8. DHCPINFORM requete du client (ex: parametres locaux avec IP d\u00e9j\u00e0 configur\u00e9e) Extensions # * PXE * BootP * DHCP relay Pour des r\u00e9seaux interconnect\u00e9s Installation & Configuration # Packages # * dnsmasq * dhcp3-server * isc-dhcp-server Interfaces # /etc/default/dhcp3-server d\u00e9finit l'interface par d\u00e9faut INTERFACES=\"eth0\" N\u00e9cessite une IP fixe dans /etc/network/interfaces Options du serveur DHCP # /etc/dhcp3/dhcpd.conf * option domain-name \"example.com\" * option domain-name-servers W.X.Y.T * range * option netbios-name-servers * option subnet-mask * option routers * option broadcast-address * max-lease-time * default-lease-time * autoritative; DHCP dynamique # default-lease-time 600; max-lease-time 7200; option broadcast-address 10.232.144.255; option routers 10.232.144.1; option subnet-mask 255.255.255.0; option domain-name-servers 10.167.160.3; option netbios-name-servers 10.232.144.5; # This is a very basic subnet declaration. subnet 10.232.144.0 netmask 255.255.255.0 { range 10.232.144.96 10.232.144.254; } DHCP statique # deny unknown-clients; subnet 10.232.144.0 netmask 255.255.255.0 { host client1 { hardware ethernet 59:6F:98:95:4A:C4; fixed-address 10.232.144.96; } host client2 { hardware ethernet 69:AC:A6:B2:34:9B; fixed-address 10.232.144.97; } host client3{ .... } } iptables # iptables -A INPUT -s 192.168.1.0/24 \\ -i eth0 -p tcp --sport 68 --dport 67 -j ACCEPT iptables -A INPUT -s 192.168.1.0/24 \\ -i eth0 -p udp --sport 68 --dport 67 -j ACCEPT BootP + PXE # ## bootp my headless home router ## host router { hardware ethernet 08:00:2B:4C:59:23; fixed-address 192.168.0.21; filename \"debian6/pxelinux.0\"; } Test # dhclient -v eth0 R\u00e9f\u00e9rences # * Wikipedia : DHCP * Debian Wiki : DHCP Server","title":"Serveur DHCP"},{"location":"020-admin/100-services/030-dhcp-server/#serveur-dhcp","text":"","title":"Serveur DHCP"},{"location":"020-admin/100-services/030-dhcp-server/#concept","text":"","title":"Concept"},{"location":"020-admin/100-services/030-dhcp-server/#modes","text":"* dynamic allocation * automatic allocation * static allocation","title":"Modes"},{"location":"020-admin/100-services/030-dhcp-server/#verbes","text":"1. DHCPDISCOVER localisation des serveurs 2. DHCPOFFER r\u00e9ponse du serveur 3. DHCPREQUEST requete du client (ex: prolongation du bail) 4. DHCPACK r\u00e9ponse du serveur (ex: parametres, IP client) 5. DHCPNAK r\u00e9ponse du serveur (ex: bail \u00e9chu, mauvaise configuration) 6. DHCPDECLINE r\u00e9ponse du client (ex: addresse d\u00e9j\u00e0 utilis\u00e9e) 7. DHCPRELEASE le client libere son IP 8. DHCPINFORM requete du client (ex: parametres locaux avec IP d\u00e9j\u00e0 configur\u00e9e)","title":"Verbes"},{"location":"020-admin/100-services/030-dhcp-server/#extensions","text":"* PXE * BootP * DHCP relay Pour des r\u00e9seaux interconnect\u00e9s","title":"Extensions"},{"location":"020-admin/100-services/030-dhcp-server/#installation-configuration","text":"","title":"Installation &amp; Configuration"},{"location":"020-admin/100-services/030-dhcp-server/#packages","text":"* dnsmasq * dhcp3-server * isc-dhcp-server","title":"Packages"},{"location":"020-admin/100-services/030-dhcp-server/#interfaces","text":"/etc/default/dhcp3-server d\u00e9finit l'interface par d\u00e9faut INTERFACES=\"eth0\" N\u00e9cessite une IP fixe dans /etc/network/interfaces","title":"Interfaces"},{"location":"020-admin/100-services/030-dhcp-server/#options-du-serveur-dhcp","text":"/etc/dhcp3/dhcpd.conf * option domain-name \"example.com\" * option domain-name-servers W.X.Y.T * range * option netbios-name-servers * option subnet-mask * option routers * option broadcast-address * max-lease-time * default-lease-time * autoritative;","title":"Options du serveur DHCP"},{"location":"020-admin/100-services/030-dhcp-server/#dhcp-dynamique","text":"default-lease-time 600; max-lease-time 7200; option broadcast-address 10.232.144.255; option routers 10.232.144.1; option subnet-mask 255.255.255.0; option domain-name-servers 10.167.160.3; option netbios-name-servers 10.232.144.5; # This is a very basic subnet declaration. subnet 10.232.144.0 netmask 255.255.255.0 { range 10.232.144.96 10.232.144.254; }","title":"DHCP dynamique"},{"location":"020-admin/100-services/030-dhcp-server/#dhcp-statique","text":"deny unknown-clients; subnet 10.232.144.0 netmask 255.255.255.0 { host client1 { hardware ethernet 59:6F:98:95:4A:C4; fixed-address 10.232.144.96; } host client2 { hardware ethernet 69:AC:A6:B2:34:9B; fixed-address 10.232.144.97; } host client3{ .... } }","title":"DHCP statique"},{"location":"020-admin/100-services/030-dhcp-server/#iptables","text":"iptables -A INPUT -s 192.168.1.0/24 \\ -i eth0 -p tcp --sport 68 --dport 67 -j ACCEPT iptables -A INPUT -s 192.168.1.0/24 \\ -i eth0 -p udp --sport 68 --dport 67 -j ACCEPT","title":"iptables"},{"location":"020-admin/100-services/030-dhcp-server/#bootp-pxe","text":"## bootp my headless home router ## host router { hardware ethernet 08:00:2B:4C:59:23; fixed-address 192.168.0.21; filename \"debian6/pxelinux.0\"; }","title":"BootP + PXE"},{"location":"020-admin/100-services/030-dhcp-server/#test","text":"dhclient -v eth0","title":"Test"},{"location":"020-admin/100-services/030-dhcp-server/#references","text":"* Wikipedia : DHCP * Debian Wiki : DHCP Server","title":"R\u00e9f\u00e9rences"},{"location":"020-admin/100-services/040-dhcp-dnsmasq/","text":"Server DHCP (DnsMasq) (TODO) #","title":"Server DHCP (DnsMasq) (TODO)"},{"location":"020-admin/100-services/040-dhcp-dnsmasq/#server-dhcp-dnsmasq-todo","text":"","title":"Server DHCP (DnsMasq) (TODO)"},{"location":"030-optimization/010-troubleshooting/","text":"D\u00e9pannage # https://www.loggly.com/ultimate-guide/troubleshooting-with-linux-logs/","title":"D\u00e9pannage"},{"location":"030-optimization/010-troubleshooting/#depannage","text":"https://www.loggly.com/ultimate-guide/troubleshooting-with-linux-logs/","title":"D\u00e9pannage"},{"location":"030-optimization/010-troubleshooting/040-basic-hardware/","text":"Mat\u00e9riel # https://opensource.com/article/18/12/troubleshooting-hardware-problems-linux","title":"Mat\u00e9riel"},{"location":"030-optimization/010-troubleshooting/040-basic-hardware/#materiel","text":"https://opensource.com/article/18/12/troubleshooting-hardware-problems-linux","title":"Mat\u00e9riel"},{"location":"030-optimization/010-troubleshooting/050-basic-network/","text":"R\u00e9seau # https://www.redhat.com/sysadmin/beginners-guide-network-troubleshooting-linux https://upcloud.com/community/tutorials/troubleshoot-network-connectivity-linux-server/","title":"R\u00e9seau"},{"location":"030-optimization/010-troubleshooting/050-basic-network/#reseau","text":"https://www.redhat.com/sysadmin/beginners-guide-network-troubleshooting-linux https://upcloud.com/community/tutorials/troubleshoot-network-connectivity-linux-server/","title":"R\u00e9seau"},{"location":"030-optimization/010-troubleshooting/060-graphical/","text":"Session graphique # Xorg # => /var/log/Xorg.log modesettings drivers inputs Disk space & permissions # check that $HOME has sufficient space check that $HOME has write permissions Display manager # check that there is a WM defined (.xsession, .Xstart, etc.) Compositing # Check that your system supports 2D/3D HW acceleration * glxinfo * vainfo","title":"Session graphique"},{"location":"030-optimization/010-troubleshooting/060-graphical/#session-graphique","text":"","title":"Session graphique"},{"location":"030-optimization/010-troubleshooting/060-graphical/#xorg","text":"=> /var/log/Xorg.log modesettings drivers inputs","title":"Xorg"},{"location":"030-optimization/010-troubleshooting/060-graphical/#disk-space-permissions","text":"check that $HOME has sufficient space check that $HOME has write permissions","title":"Disk space &amp; permissions"},{"location":"030-optimization/010-troubleshooting/060-graphical/#display-manager","text":"check that there is a WM defined (.xsession, .Xstart, etc.)","title":"Display manager"},{"location":"030-optimization/010-troubleshooting/060-graphical/#compositing","text":"Check that your system supports 2D/3D HW acceleration * glxinfo * vainfo","title":"Compositing"},{"location":"030-optimization/020-rescue/","text":"Sauvetage du syst\u00e8me #","title":"Sauvetage du syst\u00e8me"},{"location":"030-optimization/020-rescue/#sauvetage-du-systeme","text":"","title":"Sauvetage du syst\u00e8me"},{"location":"030-optimization/020-rescue/010-magick-keys/","text":"Magick keys # Alt + Syst + R (raw keyboard) Alt + Syst + E (sigterm \u00e0 tous les process) Alt + Syst + I (sigkill \u00e0 tous les process) Alt + Syst + S (sync disks) Alt + Syst + U (umount) Alt + Syst + B (reboot) Alt + Syst + O (off) Note : ~ 2sec entre chaque touche \u00ab Revenir en Islande Sur un Bateau \u00bb R\u00e9f\u00e9rences # Wikipedia: Magic_SysRq_key","title":"Magick keys"},{"location":"030-optimization/020-rescue/010-magick-keys/#magick-keys","text":"Alt + Syst + R (raw keyboard) Alt + Syst + E (sigterm \u00e0 tous les process) Alt + Syst + I (sigkill \u00e0 tous les process) Alt + Syst + S (sync disks) Alt + Syst + U (umount) Alt + Syst + B (reboot) Alt + Syst + O (off) Note : ~ 2sec entre chaque touche \u00ab Revenir en Islande Sur un Bateau \u00bb","title":"Magick keys"},{"location":"030-optimization/020-rescue/010-magick-keys/#references","text":"Wikipedia: Magic_SysRq_key","title":"R\u00e9f\u00e9rences"},{"location":"030-optimization/020-rescue/020-bootloader/","text":"From working bootloader # grub + init=/bin/sh","title":"From working bootloader"},{"location":"030-optimization/020-rescue/020-bootloader/#from-working-bootloader","text":"grub + init=/bin/sh","title":"From working bootloader"},{"location":"030-optimization/020-rescue/030-from-livecd/","text":"From LiveCD/LiveUSB # usb/cd/dvd boot + mount-bind + chroot","title":"From LiveCD/LiveUSB"},{"location":"030-optimization/020-rescue/030-from-livecd/#from-livecdliveusb","text":"usb/cd/dvd boot + mount-bind + chroot","title":"From LiveCD/LiveUSB"},{"location":"030-optimization/020-rescue/050-rescuing-data/","text":"Sauvetage de donn\u00e9es # Rsync # Tar + SSH # tar .. | ssh tar ...","title":"Sauvetage de donn\u00e9es"},{"location":"030-optimization/020-rescue/050-rescuing-data/#sauvetage-de-donnees","text":"","title":"Sauvetage de donn\u00e9es"},{"location":"030-optimization/020-rescue/050-rescuing-data/#rsync","text":"","title":"Rsync"},{"location":"030-optimization/020-rescue/050-rescuing-data/#tar-ssh","text":"tar .. | ssh tar ...","title":"Tar + SSH"},{"location":"030-optimization/030-performances/","text":"Optimisation #","title":"Optimisation"},{"location":"030-optimization/030-performances/#optimisation","text":"","title":"Optimisation"},{"location":"030-optimization/030-performances/010-global/","text":"Performances g\u00e9n\u00e9rales # Outils # iostat vmstat htop sar Rappels sur les schedulers processus # elevator=anticipatory|cfq|deadline|noop Rappels sur les priorit\u00e9s (nice) # Rappels sur les schedulers IO # Rappels sur les priorit\u00e9s (ionice, etc.) Rappel sur NoHZ # nohz Rappel sur CPU Affinity # isolcpus=1,2,3 => ligne de d\u00e9marrage du kernel cpuaffinity sur le processus que tu veux, pour lui attribuer le cpu n\u00b04 R\u00e9f\u00e9rences # http://www.leonardoborda.com/blog/how-to-configure-sysstatsar-on-ubuntudebian/ https://www.admin-magazine.com/HPC/Articles/Linux-I-O-Schedulers https://en.wikipedia.org/wiki/Scheduling_(computing) https://en.wikipedia.org/wiki/Completely_Fair_Scheduler https://www.kernel.org/doc/Documentation/timers/NO_HZ.txt","title":"Performances g\u00e9n\u00e9rales"},{"location":"030-optimization/030-performances/010-global/#performances-generales","text":"","title":"Performances g\u00e9n\u00e9rales"},{"location":"030-optimization/030-performances/010-global/#outils","text":"iostat vmstat htop sar","title":"Outils"},{"location":"030-optimization/030-performances/010-global/#rappels-sur-les-schedulers-processus","text":"elevator=anticipatory|cfq|deadline|noop","title":"Rappels sur les schedulers processus"},{"location":"030-optimization/030-performances/010-global/#rappels-sur-les-priorites-nice","text":"","title":"Rappels sur les priorit\u00e9s (nice)"},{"location":"030-optimization/030-performances/010-global/#rappels-sur-les-schedulers-io","text":"Rappels sur les priorit\u00e9s (ionice, etc.)","title":"Rappels sur les schedulers IO"},{"location":"030-optimization/030-performances/010-global/#rappel-sur-nohz","text":"nohz","title":"Rappel sur NoHZ"},{"location":"030-optimization/030-performances/010-global/#rappel-sur-cpu-affinity","text":"isolcpus=1,2,3 => ligne de d\u00e9marrage du kernel cpuaffinity sur le processus que tu veux, pour lui attribuer le cpu n\u00b04","title":"Rappel sur CPU Affinity"},{"location":"030-optimization/030-performances/010-global/#references","text":"http://www.leonardoborda.com/blog/how-to-configure-sysstatsar-on-ubuntudebian/ https://www.admin-magazine.com/HPC/Articles/Linux-I-O-Schedulers https://en.wikipedia.org/wiki/Scheduling_(computing) https://en.wikipedia.org/wiki/Completely_Fair_Scheduler https://www.kernel.org/doc/Documentation/timers/NO_HZ.txt","title":"R\u00e9f\u00e9rences"},{"location":"030-optimization/030-performances/020-cpu/","text":"Performance du CPU # Bande passante CPU # dd if=/dev/zero bs=1M count=1024 | md5sum","title":"Performance du CPU"},{"location":"030-optimization/030-performances/020-cpu/#performance-du-cpu","text":"","title":"Performance du CPU"},{"location":"030-optimization/030-performances/020-cpu/#bande-passante-cpu","text":"dd if=/dev/zero bs=1M count=1024 | md5sum","title":"Bande passante CPU"},{"location":"030-optimization/030-performances/030-ram/","text":"RAM # ZSwap # Il s'agit de pr\u00e9f\u00e9rer un peu d'usage CPU \u00e0 l'utilisation de la SWAP (qui va engendrer des I/O disque). Le systeme utilise une partie r\u00e9serv\u00e9e de la RAM pour y stock\u00e9e compress\u00e9es les donn\u00e9es \u00e0 destination de la swap Tmpfs # ramdisk ZRam # zram: Compressed RAM based block devices La d\u00e9duplication de pages m\u00e9moire avec KSM # root@ordinateur:~# cat /sys/kernel/mm/ksm/run 1 root@ordinateur:~# echo 1 > /sys/kernel/mm/ksm/run root@ordinateur:~# grep -H '' /sys/kernel/mm/ksm/pages_* /sys/kernel/mm/ksm/pages_shared:156 /sys/kernel/mm/ksm/pages_sharing:17472 /sys/kernel/mm/ksm/pages_to_scan:100 /sys/kernel/mm/ksm/pages_unshared:26672 /sys/kernel/mm/ksm/pages_volatile:116 pages_shared : pages m\u00e9moires qui ont pu \u00eatre partag\u00e9es gr\u00e2ce au drapeau MADV_MERGEABLE sp\u00e9cifi\u00e9 par le d\u00e9veloppeur du logiciel. pages_unshared : pages m\u00e9moires avec le drapeau MADV_MERGEABLE mais qui ne sont pas partag\u00e9es par manque de double usage. pages_sharing : pages m\u00e9moires \u00e9conomis\u00e9es gr\u00e2ce au partage des pages_shared. pages_volatile : pages m\u00e9moires qui bougent trop souvent pour \u00eatre partag\u00e9es. R\u00e9f\u00e9rences # https://www.deltasight.fr/les-optimisations-memoire-sous-linux/ Linux Kernel Documentation: ZSwap Linux Kernel Documentation: ZRam Linux Kernel Documentation: KSM Debian Wiki: ZRAM","title":"RAM"},{"location":"030-optimization/030-performances/030-ram/#ram","text":"","title":"RAM"},{"location":"030-optimization/030-performances/030-ram/#zswap","text":"Il s'agit de pr\u00e9f\u00e9rer un peu d'usage CPU \u00e0 l'utilisation de la SWAP (qui va engendrer des I/O disque). Le systeme utilise une partie r\u00e9serv\u00e9e de la RAM pour y stock\u00e9e compress\u00e9es les donn\u00e9es \u00e0 destination de la swap","title":"ZSwap"},{"location":"030-optimization/030-performances/030-ram/#tmpfs","text":"ramdisk","title":"Tmpfs"},{"location":"030-optimization/030-performances/030-ram/#zram","text":"zram: Compressed RAM based block devices","title":"ZRam"},{"location":"030-optimization/030-performances/030-ram/#la-deduplication-de-pages-memoire-avec-ksm","text":"root@ordinateur:~# cat /sys/kernel/mm/ksm/run 1 root@ordinateur:~# echo 1 > /sys/kernel/mm/ksm/run root@ordinateur:~# grep -H '' /sys/kernel/mm/ksm/pages_* /sys/kernel/mm/ksm/pages_shared:156 /sys/kernel/mm/ksm/pages_sharing:17472 /sys/kernel/mm/ksm/pages_to_scan:100 /sys/kernel/mm/ksm/pages_unshared:26672 /sys/kernel/mm/ksm/pages_volatile:116 pages_shared : pages m\u00e9moires qui ont pu \u00eatre partag\u00e9es gr\u00e2ce au drapeau MADV_MERGEABLE sp\u00e9cifi\u00e9 par le d\u00e9veloppeur du logiciel. pages_unshared : pages m\u00e9moires avec le drapeau MADV_MERGEABLE mais qui ne sont pas partag\u00e9es par manque de double usage. pages_sharing : pages m\u00e9moires \u00e9conomis\u00e9es gr\u00e2ce au partage des pages_shared. pages_volatile : pages m\u00e9moires qui bougent trop souvent pour \u00eatre partag\u00e9es.","title":"La d\u00e9duplication de pages m\u00e9moire avec KSM"},{"location":"030-optimization/030-performances/030-ram/#references","text":"https://www.deltasight.fr/les-optimisations-memoire-sous-linux/ Linux Kernel Documentation: ZSwap Linux Kernel Documentation: ZRam Linux Kernel Documentation: KSM Debian Wiki: ZRAM","title":"R\u00e9f\u00e9rences"},{"location":"030-optimization/030-performances/040-disk/","text":"Performances des disques # * hdparm * kernel /sys/block/sda/stat /proc/diskstats <https://www.kernel.org/doc/Documentation/block/stat.txt> <https://www.kernel.org/doc/Documentation/iostats.txt> * gnome disk (TODO: v\u00e9rifier si danger ou pas) * sysstats * sar * iostat * iotop * iodump * atop * $ dstat -tdD total,sda,sdb,sdc,md1 60 (-c => IO percentage) * hdparm direct read sudo hdparm -t /dev/sda2 cached read. sudo hdparm -T /dev/sda2 * time sh -c \"dd if=/dev/zero of=ddfile bs=8k count=250000 && sync\" https://unix.stackexchange.com/questions/108838/how-can-i-benchmark-my-hdd","title":"Performances des disques"},{"location":"030-optimization/030-performances/040-disk/#performances-des-disques","text":"* hdparm * kernel /sys/block/sda/stat /proc/diskstats <https://www.kernel.org/doc/Documentation/block/stat.txt> <https://www.kernel.org/doc/Documentation/iostats.txt> * gnome disk (TODO: v\u00e9rifier si danger ou pas) * sysstats * sar * iostat * iotop * iodump * atop * $ dstat -tdD total,sda,sdb,sdc,md1 60 (-c => IO percentage) * hdparm direct read sudo hdparm -t /dev/sda2 cached read. sudo hdparm -T /dev/sda2 * time sh -c \"dd if=/dev/zero of=ddfile bs=8k count=250000 && sync\" https://unix.stackexchange.com/questions/108838/how-can-i-benchmark-my-hdd","title":"Performances des disques"},{"location":"030-optimization/030-performances/050-fs/","text":"Performance du filesystem # dd # probleme de cache, le systeme synchronise quand il veut # => les chiffres affich\u00e9s ne sont pas bons (puisque les donn\u00e9es sont encore en ram) dd bs=1M count=256 if=/dev/zero of=test # probleme de cache, le systeme synchronise quand il veut # => les chiffres affich\u00e9s ne sont pas bons (puisque les donn\u00e9es sont encore en ram) # => sync est fait apres le dd (donc le rapport est faux) # => time n'est pas pr\u00e9cis time sh -c \"dd bs=1M count=256 if=/dev/zero of=test; sync\" => pas bon dd bs=1M count=256 if=/dev/zero of=test conv=fdatasync dd bs=1M count=256 if=/dev/zero of=test oflag=dsync https://www.cyberciti.biz/faq/howto-linux-unix-test-disk-performance-with-dd-command/ root@s1-8-sbg3-2:/home/debian# dd bs=1M count=256 if=/dev/zero of=test conv=fdatasync 256+0 records in 256+0 records out 268435456 bytes (268 MB, 256 MiB) copied, 0.646532 s, 415 MB/s root@s1-8-sbg3-2:/home/debian# dd bs=1M count=256 if=/dev/zero of=test oflag=dsync 256+0 records in 256+0 records out 268435456 bytes (268 MB, 256 MiB) copied, 1.17922 s, 228 MB/s sysbench sysbench fileio prepare sysbench fileio --file-test-mode=rndrw run FFSB https://sourceforge.net/projects/ffsb/files/ffsb/ Bonnie++ bonnie++ -d /tmp -s 4G -n 0 -m TEST -f -b -u james https://www.jamescoyle.net/how-to/913-simple-bonnie-example https://www.jamescoyle.net/how-to/599-benchmark-disk-io-with-dd-and-bonnie https://www.coker.com.au/bonnie++/readme.html fio Sequential READ speed with big blocks (this should be near the number you see in the specifications for your drive): fio --name TEST --eta-newline=5s --filename=fio-tempfile.dat --rw=read --size=500m --io_size=10g --blocksize=1024k --ioengine=libaio --fsync=10000 --iodepth=32 --direct=1 --numjobs=1 --runtime=60 --group_reporting Sequential WRITE speed with big blocks (this should be near the number you see in the specifications for your drive): fio --name TEST --eta-newline=5s --filename=fio-tempfile.dat --rw=write --size=500m --io_size=10g --blocksize=1024k --ioengine=libaio --fsync=10000 --iodepth=32 --direct=1 --numjobs=1 --runtime=60 --group_reporting Random 4K read QD1 (this is the number that really matters for real world performance unless you know better for sure): fio --name TEST --eta-newline=5s --filename=fio-tempfile.dat --rw=randread --size=500m --io_size=10g --blocksize=4k --ioengine=libaio --fsync=1 --iodepth=1 --direct=1 --numjobs=1 --runtime=60 --group_reporting Mixed random 4K read and write QD1 with sync (this is worst case number you should ever expect from your drive, usually less than 1% of the numbers listed in the spec sheet): fio --name TEST --eta-newline=5s --filename=fio-tempfile.dat --rw=randrw --size=500m --io_size=10g --blocksize=4k --ioengine=libaio --fsync=1 --iodepth=1 --direct=1 --numjobs=1 --runtime=60 --group_reporting https://askubuntu.com/questions/87035/how-to-check-hard-disk-performance postmark https://www.vi4io.org/tools/benchmarks/postmark R\u00e9f\u00e9rences # https://www.deltasight.fr/comprendre-le-cache-des-fichiers-sous-linux/","title":"Performance du filesystem"},{"location":"030-optimization/030-performances/050-fs/#performance-du-filesystem","text":"dd # probleme de cache, le systeme synchronise quand il veut # => les chiffres affich\u00e9s ne sont pas bons (puisque les donn\u00e9es sont encore en ram) dd bs=1M count=256 if=/dev/zero of=test # probleme de cache, le systeme synchronise quand il veut # => les chiffres affich\u00e9s ne sont pas bons (puisque les donn\u00e9es sont encore en ram) # => sync est fait apres le dd (donc le rapport est faux) # => time n'est pas pr\u00e9cis time sh -c \"dd bs=1M count=256 if=/dev/zero of=test; sync\" => pas bon dd bs=1M count=256 if=/dev/zero of=test conv=fdatasync dd bs=1M count=256 if=/dev/zero of=test oflag=dsync https://www.cyberciti.biz/faq/howto-linux-unix-test-disk-performance-with-dd-command/ root@s1-8-sbg3-2:/home/debian# dd bs=1M count=256 if=/dev/zero of=test conv=fdatasync 256+0 records in 256+0 records out 268435456 bytes (268 MB, 256 MiB) copied, 0.646532 s, 415 MB/s root@s1-8-sbg3-2:/home/debian# dd bs=1M count=256 if=/dev/zero of=test oflag=dsync 256+0 records in 256+0 records out 268435456 bytes (268 MB, 256 MiB) copied, 1.17922 s, 228 MB/s sysbench sysbench fileio prepare sysbench fileio --file-test-mode=rndrw run FFSB https://sourceforge.net/projects/ffsb/files/ffsb/ Bonnie++ bonnie++ -d /tmp -s 4G -n 0 -m TEST -f -b -u james https://www.jamescoyle.net/how-to/913-simple-bonnie-example https://www.jamescoyle.net/how-to/599-benchmark-disk-io-with-dd-and-bonnie https://www.coker.com.au/bonnie++/readme.html fio Sequential READ speed with big blocks (this should be near the number you see in the specifications for your drive): fio --name TEST --eta-newline=5s --filename=fio-tempfile.dat --rw=read --size=500m --io_size=10g --blocksize=1024k --ioengine=libaio --fsync=10000 --iodepth=32 --direct=1 --numjobs=1 --runtime=60 --group_reporting Sequential WRITE speed with big blocks (this should be near the number you see in the specifications for your drive): fio --name TEST --eta-newline=5s --filename=fio-tempfile.dat --rw=write --size=500m --io_size=10g --blocksize=1024k --ioengine=libaio --fsync=10000 --iodepth=32 --direct=1 --numjobs=1 --runtime=60 --group_reporting Random 4K read QD1 (this is the number that really matters for real world performance unless you know better for sure): fio --name TEST --eta-newline=5s --filename=fio-tempfile.dat --rw=randread --size=500m --io_size=10g --blocksize=4k --ioengine=libaio --fsync=1 --iodepth=1 --direct=1 --numjobs=1 --runtime=60 --group_reporting Mixed random 4K read and write QD1 with sync (this is worst case number you should ever expect from your drive, usually less than 1% of the numbers listed in the spec sheet): fio --name TEST --eta-newline=5s --filename=fio-tempfile.dat --rw=randrw --size=500m --io_size=10g --blocksize=4k --ioengine=libaio --fsync=1 --iodepth=1 --direct=1 --numjobs=1 --runtime=60 --group_reporting https://askubuntu.com/questions/87035/how-to-check-hard-disk-performance postmark https://www.vi4io.org/tools/benchmarks/postmark","title":"Performance du filesystem"},{"location":"030-optimization/030-performances/050-fs/#references","text":"https://www.deltasight.fr/comprendre-le-cache-des-fichiers-sous-linux/","title":"R\u00e9f\u00e9rences"},{"location":"030-optimization/030-performances/060-network/","text":"Performances r\u00e9seaux # Fonctionnement # NIC RX/TX ring buffer hard IRQ + softIRQ + coalesce Ingress/Egress + skbuff + qdisc Prerouting/Forwarding/Output + bridge Outils systeme # ethtool -g ethtool -G ... ethtool -s Outils de mesure # Passif # vnstat iftop nload nethogs bmon darkstat https://www.tecmint.com/darkstat-web-based-linux-network-traffic-analyzer/ *mon Actif # iperf3 https://www.tecmint.com/test-network-throughput-in-linux/ R\u00e9f\u00e9rences # https://access.redhat.com/documentation/fr-fr/red_hat_enterprise_linux/6/html/performance_tuning_guide/s-network-dont-adjust-defaults https://access.redhat.com/sites/default/files/attachments/20150325_network_performance_tuning.pdf https://cromwell-intl.com/open-source/performance-tuning/tcp.html https://gist.github.com/voluntas/bc54c60aaa7ad6856e6f6a928b79ab6c https://github.com/leandromoreira/linux-network-performance-parameters https://wwwx.cs.unc.edu/~sparkst/howto/network_tuning.php","title":"Performances r\u00e9seaux"},{"location":"030-optimization/030-performances/060-network/#performances-reseaux","text":"","title":"Performances r\u00e9seaux"},{"location":"030-optimization/030-performances/060-network/#fonctionnement","text":"NIC RX/TX ring buffer hard IRQ + softIRQ + coalesce Ingress/Egress + skbuff + qdisc Prerouting/Forwarding/Output + bridge","title":"Fonctionnement"},{"location":"030-optimization/030-performances/060-network/#outils-systeme","text":"ethtool -g ethtool -G ... ethtool -s","title":"Outils systeme"},{"location":"030-optimization/030-performances/060-network/#outils-de-mesure","text":"","title":"Outils de mesure"},{"location":"030-optimization/030-performances/060-network/#passif","text":"vnstat iftop nload nethogs bmon darkstat https://www.tecmint.com/darkstat-web-based-linux-network-traffic-analyzer/ *mon","title":"Passif"},{"location":"030-optimization/030-performances/060-network/#actif","text":"iperf3 https://www.tecmint.com/test-network-throughput-in-linux/","title":"Actif"},{"location":"030-optimization/030-performances/060-network/#references","text":"https://access.redhat.com/documentation/fr-fr/red_hat_enterprise_linux/6/html/performance_tuning_guide/s-network-dont-adjust-defaults https://access.redhat.com/sites/default/files/attachments/20150325_network_performance_tuning.pdf https://cromwell-intl.com/open-source/performance-tuning/tcp.html https://gist.github.com/voluntas/bc54c60aaa7ad6856e6f6a928b79ab6c https://github.com/leandromoreira/linux-network-performance-parameters https://wwwx.cs.unc.edu/~sparkst/howto/network_tuning.php","title":"R\u00e9f\u00e9rences"},{"location":"030-optimization/030-performances/070-isolators/","text":"Isolateurs * chroot * vserver * lxc lxc.cgroup.cpuset.cpus = 0,1,2 lxc.cgroup.cpu.shares = 512 lxc.cgroup.memory.limit_in_bytes = 1000M lxc.cgroup.memory.memsw.limit_in_bytes = 2000M limits.cpu 2 limits.cpu.allowance 20% limits.cpu.allowance 100ms/200ms limits.cpu.priority 5 * docker => systemd-cgtop","title":"070 isolators"},{"location":"030-optimization/030-performances/090-tuned/","text":"Tuned (Service) # R\u00e9f\u00e9rences # https://tuned-project.org/docs/tuned_devconf_2019.pdf https://computingforgeeks.com/optimize-linux-system-performance-with-tuned-adm/","title":"Tuned (Service)"},{"location":"030-optimization/030-performances/090-tuned/#tuned-service","text":"","title":"Tuned (Service)"},{"location":"030-optimization/030-performances/090-tuned/#references","text":"https://tuned-project.org/docs/tuned_devconf_2019.pdf https://computingforgeeks.com/optimize-linux-system-performance-with-tuned-adm/","title":"R\u00e9f\u00e9rences"}]}